<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/services/AuthService.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/services/AuthService.kt" />
              <option name="originalContent" value="package com.example.healynk.services&#10;&#10;import android.net.Uri&#10;import com.google.firebase.auth.FirebaseAuth&#10;import com.google.firebase.auth.ktx.userProfileChangeRequest&#10;import kotlinx.coroutines.channels.awaitClose&#10;import kotlinx.coroutines.flow.Flow&#10;import kotlinx.coroutines.flow.callbackFlow&#10;import kotlinx.coroutines.tasks.await&#10;&#10;class AuthService(private val auth: FirebaseAuth = FirebaseAuth.getInstance()) {&#10;&#10;    val currentUserId: String?&#10;        get() = auth.currentUser?.uid&#10;&#10;    val currentUserEmail: String?&#10;        get() = auth.currentUser?.email&#10;&#10;    val currentUserDisplayName: String?&#10;        get() = auth.currentUser?.displayName&#10;&#10;    val currentUserPhotoUrl: String?&#10;        get() = auth.currentUser?.photoUrl?.toString()&#10;&#10;    fun authState(): Flow&lt;Boolean&gt; = callbackFlow {&#10;        val listener = FirebaseAuth.AuthStateListener { firebaseAuth -&gt;&#10;            trySend(firebaseAuth.currentUser != null)&#10;        }&#10;        auth.addAuthStateListener(listener)&#10;        awaitClose { auth.removeAuthStateListener(listener) }&#10;    }&#10;&#10;    suspend fun register(email: String, password: String) {&#10;        auth.createUserWithEmailAndPassword(email.trim(), password).await()&#10;    }&#10;&#10;    suspend fun login(email: String, password: String) {&#10;        auth.signInWithEmailAndPassword(email.trim(), password).await()&#10;    }&#10;&#10;    fun logout() {&#10;        auth.signOut()&#10;    }&#10;&#10;    suspend fun updateDisplayName(displayName: String) {&#10;        val user = requireUser()&#10;        val request = userProfileChangeRequest { this.displayName = displayName }&#10;        user.updateProfile(request).await()&#10;    }&#10;&#10;    suspend fun updatePhotoUrl(photoUrl: String?) {&#10;        val user = requireUser()&#10;        val request = userProfileChangeRequest {&#10;            this.photoUri = photoUrl?.takeIf { it.isNotBlank() }?.let(Uri::parse)&#10;        }&#10;        user.updateProfile(request).await()&#10;    }&#10;&#10;    suspend fun updateEmail(newEmail: String) {&#10;        requireUser().updateEmail(newEmail.trim()).await()&#10;    }&#10;&#10;    suspend fun updatePassword(newPassword: String) {&#10;        requireUser().updatePassword(newPassword).await()&#10;    }&#10;&#10;    private fun requireUser() = auth.currentUser ?: throw IllegalStateException(&quot;User belum login&quot;)&#10;}" />
              <option name="updatedContent" value="package com.example.healynk.services&#10;&#10;import android.net.Uri&#10;import com.google.firebase.auth.FirebaseAuth&#10;import com.google.firebase.auth.ktx.userProfileChangeRequest&#10;import kotlinx.coroutines.channels.awaitClose&#10;import kotlinx.coroutines.flow.Flow&#10;import kotlinx.coroutines.flow.callbackFlow&#10;import kotlinx.coroutines.tasks.await&#10;&#10;class AuthService(private val auth: FirebaseAuth = FirebaseAuth.getInstance()) {&#10;&#10;    val currentUserId: String?&#10;        get() = auth.currentUser?.uid&#10;&#10;    val currentUserEmail: String?&#10;        get() = auth.currentUser?.email&#10;&#10;    val currentUserDisplayName: String?&#10;        get() = auth.currentUser?.displayName&#10;&#10;    val currentUserPhotoUrl: String?&#10;        get() = auth.currentUser?.photoUrl?.toString()&#10;&#10;    fun authState(): Flow&lt;Boolean&gt; = callbackFlow {&#10;        val listener = FirebaseAuth.AuthStateListener { firebaseAuth -&gt;&#10;            trySend(firebaseAuth.currentUser != null)&#10;        }&#10;        auth.addAuthStateListener(listener)&#10;        awaitClose { auth.removeAuthStateListener(listener) }&#10;    }&#10;&#10;    suspend fun register(email: String, password: String) {&#10;        auth.createUserWithEmailAndPassword(email.trim(), password).await()&#10;    }&#10;&#10;    suspend fun login(email: String, password: String) {&#10;        auth.signInWithEmailAndPassword(email.trim(), password).await()&#10;    }&#10;&#10;    fun logout() {&#10;        auth.signOut()&#10;    }&#10;&#10;    suspend fun updateDisplayName(displayName: String) {&#10;        val user = requireUser()&#10;        val request = userProfileChangeRequest { this.displayName = displayName }&#10;        user.updateProfile(request).await()&#10;    }&#10;&#10;    suspend fun updatePhotoUrl(photoUrl: String?) {&#10;        val user = requireUser()&#10;        val request = userProfileChangeRequest {&#10;            this.photoUri = photoUrl?.takeIf { it.isNotBlank() }?.let(Uri::parse)&#10;        }&#10;        user.updateProfile(request).await()&#10;    }&#10;&#10;    suspend fun updateEmail(newEmail: String) {&#10;        requireUser().updateEmail(newEmail.trim()).await()&#10;    }&#10;&#10;    suspend fun updatePassword(newPassword: String) {&#10;        requireUser().updatePassword(newPassword).await()&#10;    }&#10;&#10;    private fun requireUser() = auth.currentUser ?: throw IllegalStateException(&quot;User belum login&quot;)&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/utils/Formatters.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/utils/Formatters.kt" />
              <option name="originalContent" value="package com.example.healynk.utils&#10;&#10;import java.text.NumberFormat&#10;import java.text.SimpleDateFormat&#10;import java.util.Date&#10;import java.util.Locale&#10;&#10;object Formatters {&#10;    private val dateFormatter = SimpleDateFormat(&quot;dd MMM yyyy&quot;, Locale.getDefault())&#10;    private val timeFormatter = SimpleDateFormat(&quot;HH:mm&quot;, Locale.getDefault())&#10;    private val dateTimeFormatter = SimpleDateFormat(&quot;dd MMM yyyy, HH:mm&quot;, Locale.getDefault())&#10;    private val percentFormatter = NumberFormat.getPercentInstance(Locale.getDefault()).apply {&#10;        maximumFractionDigits = 0&#10;    }&#10;&#10;    fun formatDate(timestamp: Long): String = dateFormatter.format(Date(timestamp))&#10;    fun formatTime(timestamp: Long): String = timeFormatter.format(Date(timestamp))&#10;    fun formatDateTime(timestamp: Long): String = dateTimeFormatter.format(Date(timestamp))&#10;    fun formatSteps(steps: Int): String = NumberFormat.getIntegerInstance().format(steps)&#10;    fun formatPercentage(value: Float): String = percentFormatter.format(value)&#10;    fun formatDistance(distanceKm: Double): String = String.format(Locale.getDefault(), &quot;%.2f&quot;, distanceKm)&#10;    fun formatPace(pace: Double): String = String.format(Locale.getDefault(), &quot;%.2f&quot;, pace)&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.healynk.utils&#10;&#10;import java.text.NumberFormat&#10;import java.text.SimpleDateFormat&#10;import java.util.Date&#10;import java.util.Locale&#10;&#10;object Formatters {&#10;    private val dateFormatter = SimpleDateFormat(&quot;dd MMM yyyy&quot;, Locale.getDefault())&#10;    private val timeFormatter = SimpleDateFormat(&quot;HH:mm&quot;, Locale.getDefault())&#10;    private val dateTimeFormatter = SimpleDateFormat(&quot;dd MMM yyyy, HH:mm&quot;, Locale.getDefault())&#10;    private val percentFormatter = NumberFormat.getPercentInstance(Locale.getDefault()).apply {&#10;        maximumFractionDigits = 0&#10;    }&#10;&#10;    fun formatDate(timestamp: Long): String = dateFormatter.format(Date(timestamp))&#10;    fun formatTime(timestamp: Long): String = timeFormatter.format(Date(timestamp))&#10;    fun formatDateTime(timestamp: Long): String = dateTimeFormatter.format(Date(timestamp))&#10;    fun formatSteps(steps: Int): String = NumberFormat.getIntegerInstance().format(steps)&#10;    fun formatPercentage(value: Float): String = percentFormatter.format(value)&#10;    fun formatDistance(distanceKm: Double): String = String.format(Locale.getDefault(), &quot;%.2f&quot;, distanceKm)&#10;    fun formatPace(pace: Double): String = String.format(Locale.getDefault(), &quot;%.2f&quot;, pace)&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>