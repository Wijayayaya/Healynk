<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/services/AuthService.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/services/AuthService.kt" />
              <option name="originalContent" value="package com.example.healynk.services&#10;&#10;import android.net.Uri&#10;import com.google.firebase.auth.FirebaseAuth&#10;import com.google.firebase.auth.ktx.userProfileChangeRequest&#10;import kotlinx.coroutines.channels.awaitClose&#10;import kotlinx.coroutines.flow.Flow&#10;import kotlinx.coroutines.flow.callbackFlow&#10;import kotlinx.coroutines.tasks.await&#10;&#10;class AuthService(private val auth: FirebaseAuth = FirebaseAuth.getInstance()) {&#10;&#10;    val currentUserId: String?&#10;        get() = auth.currentUser?.uid&#10;&#10;    val currentUserEmail: String?&#10;        get() = auth.currentUser?.email&#10;&#10;    val currentUserDisplayName: String?&#10;        get() = auth.currentUser?.displayName&#10;&#10;    val currentUserPhotoUrl: String?&#10;        get() = auth.currentUser?.photoUrl?.toString()&#10;&#10;    fun authState(): Flow&lt;Boolean&gt; = callbackFlow {&#10;        val listener = FirebaseAuth.AuthStateListener { firebaseAuth -&gt;&#10;            trySend(firebaseAuth.currentUser != null)&#10;        }&#10;        auth.addAuthStateListener(listener)&#10;        awaitClose { auth.removeAuthStateListener(listener) }&#10;    }&#10;&#10;    suspend fun register(email: String, password: String) {&#10;        auth.createUserWithEmailAndPassword(email.trim(), password).await()&#10;    }&#10;&#10;    suspend fun login(email: String, password: String) {&#10;        auth.signInWithEmailAndPassword(email.trim(), password).await()&#10;    }&#10;&#10;    fun logout() {&#10;        auth.signOut()&#10;    }&#10;&#10;    suspend fun updateDisplayName(displayName: String) {&#10;        val user = requireUser()&#10;        val request = userProfileChangeRequest { this.displayName = displayName }&#10;        user.updateProfile(request).await()&#10;    }&#10;&#10;    suspend fun updatePhotoUrl(photoUrl: String?) {&#10;        val user = requireUser()&#10;        val request = userProfileChangeRequest {&#10;            this.photoUri = photoUrl?.takeIf { it.isNotBlank() }?.let(Uri::parse)&#10;        }&#10;        user.updateProfile(request).await()&#10;    }&#10;&#10;    suspend fun updateEmail(newEmail: String) {&#10;        requireUser().updateEmail(newEmail.trim()).await()&#10;    }&#10;&#10;    suspend fun updatePassword(newPassword: String) {&#10;        requireUser().updatePassword(newPassword).await()&#10;    }&#10;&#10;    private fun requireUser() = auth.currentUser ?: throw IllegalStateException(&quot;User belum login&quot;)&#10;}" />
              <option name="updatedContent" value="package com.example.healynk.services&#10;&#10;import android.net.Uri&#10;import com.google.firebase.auth.FirebaseAuth&#10;import com.google.firebase.auth.ktx.userProfileChangeRequest&#10;import kotlinx.coroutines.channels.awaitClose&#10;import kotlinx.coroutines.flow.Flow&#10;import kotlinx.coroutines.flow.callbackFlow&#10;import kotlinx.coroutines.tasks.await&#10;&#10;class AuthService(private val auth: FirebaseAuth = FirebaseAuth.getInstance()) {&#10;&#10;    val currentUserId: String?&#10;        get() = auth.currentUser?.uid&#10;&#10;    val currentUserEmail: String?&#10;        get() = auth.currentUser?.email&#10;&#10;    val currentUserDisplayName: String?&#10;        get() = auth.currentUser?.displayName&#10;&#10;    val currentUserPhotoUrl: String?&#10;        get() = auth.currentUser?.photoUrl?.toString()&#10;&#10;    fun authState(): Flow&lt;Boolean&gt; = callbackFlow {&#10;        val listener = FirebaseAuth.AuthStateListener { firebaseAuth -&gt;&#10;            trySend(firebaseAuth.currentUser != null)&#10;        }&#10;        auth.addAuthStateListener(listener)&#10;        awaitClose { auth.removeAuthStateListener(listener) }&#10;    }&#10;&#10;    suspend fun register(email: String, password: String) {&#10;        auth.createUserWithEmailAndPassword(email.trim(), password).await()&#10;    }&#10;&#10;    suspend fun login(email: String, password: String) {&#10;        auth.signInWithEmailAndPassword(email.trim(), password).await()&#10;    }&#10;&#10;    fun logout() {&#10;        auth.signOut()&#10;    }&#10;&#10;    suspend fun updateDisplayName(displayName: String) {&#10;        val user = requireUser()&#10;        val request = userProfileChangeRequest { this.displayName = displayName }&#10;        user.updateProfile(request).await()&#10;    }&#10;&#10;    suspend fun updatePhotoUrl(photoUrl: String?) {&#10;        val user = requireUser()&#10;        val request = userProfileChangeRequest {&#10;            this.photoUri = photoUrl?.takeIf { it.isNotBlank() }?.let(Uri::parse)&#10;        }&#10;        user.updateProfile(request).await()&#10;    }&#10;&#10;    suspend fun updateEmail(newEmail: String) {&#10;        requireUser().updateEmail(newEmail.trim()).await()&#10;    }&#10;&#10;    suspend fun updatePassword(newPassword: String) {&#10;        requireUser().updatePassword(newPassword).await()&#10;    }&#10;&#10;    private fun requireUser() = auth.currentUser ?: throw IllegalStateException(&quot;User belum login&quot;)&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/components/ActivityItem.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/components/ActivityItem.kt" />
              <option name="originalContent" value="package com.example.healynk.ui.components&#10;&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.compose.ui.unit.dp&#10;import com.example.healynk.models.ActivityEntry&#10;import com.example.healynk.utils.Formatters&#10;&#10;@Composable&#10;fun ActivityItem(&#10;    activity: ActivityEntry,&#10;    onDelete: (() -&gt; Unit)? = null,&#10;    modifier: Modifier = Modifier,&#10;    deleteIcon: ImageVector? = null&#10;) {&#10;    Card(&#10;        modifier = modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(MaterialTheme.colorScheme.surfaceVariant)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier.padding(16.dp),&#10;            verticalArrangement = Arrangement.spacedBy(4.dp)&#10;        ) {&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceBetween&#10;            ) {&#10;                Text(&#10;                    text = &quot;${activity.type} · ${Formatters.formatDateTime(activity.timestamp)}&quot;,&#10;                    style = MaterialTheme.typography.titleMedium&#10;                )&#10;                if (onDelete != null &amp;&amp; deleteIcon != null) {&#10;                    IconButton(onClick = onDelete) {&#10;                        Icon(imageVector = deleteIcon, contentDescription = &quot;Delete activity&quot;)&#10;                    }&#10;                }&#10;            }&#10;            activity.durationMinutes?.let { Text(&quot;Durasi: $it menit&quot;) }&#10;            activity.distanceKm?.let {&#10;                Text(&quot;Jarak: ${Formatters.formatDistance(it)} km&quot;)&#10;            }&#10;            activity.pace?.let {&#10;                Text(&quot;Pace: ${Formatters.formatPace(it)} mnt/km&quot;)&#10;            }&#10;            activity.caloriesBurned?.let { Text(&quot;Kalori: $it kcal&quot;) }&#10;            activity.notes?.takeIf { it.isNotBlank() }?.let { Text(it) }&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.healynk.ui.components&#10;&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.compose.ui.unit.dp&#10;import com.example.healynk.models.ActivityEntry&#10;import com.example.healynk.utils.Formatters&#10;&#10;@Composable&#10;fun ActivityItem(&#10;    activity: ActivityEntry,&#10;    onDelete: (() -&gt; Unit)? = null,&#10;    modifier: Modifier = Modifier,&#10;    deleteIcon: ImageVector? = null&#10;) {&#10;    Card(&#10;        modifier = modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(MaterialTheme.colorScheme.surfaceVariant)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier.padding(16.dp),&#10;            verticalArrangement = Arrangement.spacedBy(4.dp)&#10;        ) {&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceBetween&#10;            ) {&#10;                Text(&#10;                    text = &quot;${activity.type} · ${Formatters.formatDateTime(activity.timestamp)}&quot;,&#10;                    style = MaterialTheme.typography.titleMedium&#10;                )&#10;                if (onDelete != null &amp;&amp; deleteIcon != null) {&#10;                    IconButton(onClick = onDelete) {&#10;                        Icon(imageVector = deleteIcon, contentDescription = &quot;Delete activity&quot;)&#10;                    }&#10;                }&#10;            }&#10;            activity.durationMinutes?.let { Text(&quot;Durasi: $it menit&quot;) }&#10;            activity.distanceKm?.let {&#10;                Text(&quot;Jarak: ${Formatters.formatDistance(it)} km&quot;)&#10;            }&#10;            activity.pace?.let {&#10;                Text(&quot;Pace: ${Formatters.formatPace(it)} mnt/km&quot;)&#10;            }&#10;            activity.caloriesBurned?.let { Text(&quot;Kalori: $it kcal&quot;) }&#10;            activity.notes?.takeIf { it.isNotBlank() }?.let { Text(it) }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/components/CalorieRing.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/components/CalorieRing.kt" />
              <option name="originalContent" value="package com.example.healynk.ui.components&#10;&#10;import androidx.compose.foundation.Canvas&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.geometry.Size&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.StrokeCap&#10;import androidx.compose.ui.graphics.drawscope.Stroke&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import kotlin.math.min&#10;&#10;@Composable&#10;fun CalorieRing(&#10;    modifier: Modifier = Modifier,&#10;    consumed: Int,&#10;    target: Int,&#10;    ringColor: Color = MaterialTheme.colorScheme.primary,&#10;    trackColor: Color = MaterialTheme.colorScheme.surfaceVariant,&#10;    label: String = &quot;Kalori Terbakar&quot;&#10;) {&#10;    val safeTarget = if (target &lt;= 0) 1 else target&#10;    val progress = (consumed.toFloat() / safeTarget.toFloat()).coerceIn(0f, 1f)&#10;    Column(modifier = modifier, horizontalAlignment = Alignment.CenterHorizontally) {&#10;        Box(contentAlignment = Alignment.Center) {&#10;            Canvas(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(240.dp)&#10;            ) {&#10;                val strokeWidth = size.minDimension * 0.08f&#10;                val diameter = min(size.width, size.height) - strokeWidth&#10;                val topLeft = androidx.compose.ui.geometry.Offset(&#10;                    (size.width - diameter) / 2,&#10;                    (size.height - diameter) / 2&#10;                )&#10;                val sizePx = Size(diameter, diameter)&#10;                drawArc(&#10;                    color = trackColor,&#10;                    startAngle = -90f,&#10;                    sweepAngle = 360f,&#10;                    useCenter = false,&#10;                    topLeft = topLeft,&#10;                    size = sizePx,&#10;                    style = Stroke(width = strokeWidth, cap = StrokeCap.Round)&#10;                )&#10;                drawArc(&#10;                    color = ringColor,&#10;                    startAngle = -90f,&#10;                    sweepAngle = 360f * progress,&#10;                    useCenter = false,&#10;                    topLeft = topLeft,&#10;                    size = sizePx,&#10;                    style = Stroke(width = strokeWidth, cap = StrokeCap.Round)&#10;                )&#10;            }&#10;            Column(horizontalAlignment = Alignment.CenterHorizontally) {&#10;                Text(&#10;                    text = label,&#10;                    style = MaterialTheme.typography.labelLarge,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;                Text(&#10;                    text = &quot;$consumed / $target kcal&quot;,&#10;                    style = MaterialTheme.typography.titleLarge.copy(fontWeight = FontWeight.Bold),&#10;                    textAlign = TextAlign.Center&#10;                )&#10;                Spacer(modifier = Modifier.height(4.dp))&#10;                Text(&#10;                    text = &quot;${(progress * 100).toInt()}% tercapai&quot;,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    color = MaterialTheme.colorScheme.primary&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.healynk.ui.components&#10;&#10;import androidx.compose.foundation.Canvas&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.geometry.Size&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.StrokeCap&#10;import androidx.compose.ui.graphics.drawscope.Stroke&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import kotlin.math.min&#10;&#10;@Composable&#10;fun CalorieRing(&#10;    modifier: Modifier = Modifier,&#10;    consumed: Int,&#10;    target: Int,&#10;    ringColor: Color = MaterialTheme.colorScheme.primary,&#10;    trackColor: Color = MaterialTheme.colorScheme.surfaceVariant,&#10;    label: String = &quot;Kalori Terbakar&quot;&#10;) {&#10;    val safeTarget = if (target &lt;= 0) 1 else target&#10;    val progress = (consumed.toFloat() / safeTarget.toFloat()).coerceIn(0f, 1f)&#10;    Column(modifier = modifier, horizontalAlignment = Alignment.CenterHorizontally) {&#10;        Box(contentAlignment = Alignment.Center) {&#10;            Canvas(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(240.dp)&#10;            ) {&#10;                val strokeWidth = size.minDimension * 0.08f&#10;                val diameter = min(size.width, size.height) - strokeWidth&#10;                val topLeft = androidx.compose.ui.geometry.Offset(&#10;                    (size.width - diameter) / 2,&#10;                    (size.height - diameter) / 2&#10;                )&#10;                val sizePx = Size(diameter, diameter)&#10;                drawArc(&#10;                    color = trackColor,&#10;                    startAngle = -90f,&#10;                    sweepAngle = 360f,&#10;                    useCenter = false,&#10;                    topLeft = topLeft,&#10;                    size = sizePx,&#10;                    style = Stroke(width = strokeWidth, cap = StrokeCap.Round)&#10;                )&#10;                drawArc(&#10;                    color = ringColor,&#10;                    startAngle = -90f,&#10;                    sweepAngle = 360f * progress,&#10;                    useCenter = false,&#10;                    topLeft = topLeft,&#10;                    size = sizePx,&#10;                    style = Stroke(width = strokeWidth, cap = StrokeCap.Round)&#10;                )&#10;            }&#10;            Column(horizontalAlignment = Alignment.CenterHorizontally) {&#10;                Text(&#10;                    text = label,&#10;                    style = MaterialTheme.typography.labelLarge,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;                Text(&#10;                    text = &quot;$consumed / $target kcal&quot;,&#10;                    style = MaterialTheme.typography.titleLarge.copy(fontWeight = FontWeight.Bold),&#10;                    textAlign = TextAlign.Center&#10;                )&#10;                Spacer(modifier = Modifier.height(4.dp))&#10;                Text(&#10;                    text = &quot;${(progress * 100).toInt()}% tercapai&quot;,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    color = MaterialTheme.colorScheme.primary&#10;                )&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/components/MeasurementItem.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/components/MeasurementItem.kt" />
              <option name="originalContent" value="package com.example.healynk.ui.components&#10;&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import com.example.healynk.models.Measurement&#10;import com.example.healynk.utils.Formatters&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Delete&#10;&#10;@Composable&#10;fun MeasurementItem(&#10;    measurement: Measurement,&#10;    onDelete: (() -&gt; Unit)? = null,&#10;    modifier: Modifier = Modifier,&#10;    deleteIcon: ImageVector = Icons.Default.Delete&#10;) {&#10;    Card(&#10;        modifier = modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(MaterialTheme.colorScheme.surfaceVariant),&#10;        elevation = CardDefaults.cardElevation(0.dp)&#10;    ) {&#10;        Column(modifier = Modifier.padding(16.dp), verticalArrangement = Arrangement.spacedBy(4.dp)) {&#10;            Row(modifier = Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.SpaceBetween) {&#10;                Text(text = Formatters.formatDateTime(measurement.timestamp), style = MaterialTheme.typography.labelLarge)&#10;                if (onDelete != null) {&#10;                    IconButton(onClick = onDelete) {&#10;                        Icon(imageVector = deleteIcon, contentDescription = &quot;Delete measurement&quot;)&#10;                    }&#10;                }&#10;            }&#10;            measurement.weightKg?.let {&#10;                Text(text = &quot;Berat: $it kg&quot;, fontWeight = FontWeight.SemiBold)&#10;            }&#10;            measurement.heightCm?.let {&#10;                Text(text = &quot;Tinggi: $it cm&quot;)&#10;            }&#10;            if (measurement.systolic != null &amp;&amp; measurement.diastolic != null) {&#10;                Text(text = &quot;Tekanan darah: ${measurement.systolic}/${measurement.diastolic} mmHg&quot;)&#10;            }&#10;            measurement.glucoseMgDl?.let {&#10;                Text(text = &quot;Gula darah: $it mg/dL&quot;)&#10;            }&#10;            measurement.notes?.takeIf { it.isNotBlank() }?.let {&#10;                Text(text = it, style = MaterialTheme.typography.bodyMedium)&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.healynk.ui.components&#10;&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import com.example.healynk.models.Measurement&#10;import com.example.healynk.utils.Formatters&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Delete&#10;&#10;@Composable&#10;fun MeasurementItem(&#10;    measurement: Measurement,&#10;    onDelete: (() -&gt; Unit)? = null,&#10;    modifier: Modifier = Modifier,&#10;    deleteIcon: ImageVector = Icons.Default.Delete&#10;) {&#10;    Card(&#10;        modifier = modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(MaterialTheme.colorScheme.surfaceVariant),&#10;        elevation = CardDefaults.cardElevation(0.dp)&#10;    ) {&#10;        Column(modifier = Modifier.padding(16.dp), verticalArrangement = Arrangement.spacedBy(4.dp)) {&#10;            Row(modifier = Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.SpaceBetween) {&#10;                Text(text = Formatters.formatDateTime(measurement.timestamp), style = MaterialTheme.typography.labelLarge)&#10;                if (onDelete != null) {&#10;                    IconButton(onClick = onDelete) {&#10;                        Icon(imageVector = deleteIcon, contentDescription = &quot;Delete measurement&quot;)&#10;                    }&#10;                }&#10;            }&#10;            measurement.weightKg?.let {&#10;                Text(text = &quot;Berat: $it kg&quot;, fontWeight = FontWeight.SemiBold)&#10;            }&#10;            measurement.heightCm?.let {&#10;                Text(text = &quot;Tinggi: $it cm&quot;)&#10;            }&#10;            if (measurement.systolic != null &amp;&amp; measurement.diastolic != null) {&#10;                Text(text = &quot;Tekanan darah: ${measurement.systolic}/${measurement.diastolic} mmHg&quot;)&#10;            }&#10;            measurement.glucoseMgDl?.let {&#10;                Text(text = &quot;Gula darah: $it mg/dL&quot;)&#10;            }&#10;            measurement.notes?.takeIf { it.isNotBlank() }?.let {&#10;                Text(text = it, style = MaterialTheme.typography.bodyMedium)&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/AddActivityScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/AddActivityScreen.kt" />
              <option name="originalContent" value="package com.example.healynk.ui.screens&#10;&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.unit.dp&#10;import com.example.healynk.models.ActivityEntry&#10;import com.example.healynk.ui.components.ActivityTypeDropdown&#10;import com.example.healynk.ui.components.NumberTextField&#10;import com.example.healynk.ui.components.TextAreaField&#10;import com.example.healynk.utils.Constants&#10;&#10;@Composable&#10;fun AddActivityScreen(&#10;    onSave: (ActivityEntry) -&gt; Unit,&#10;    onCancel: () -&gt; Unit&#10;) {&#10;    var type by remember { mutableStateOf(Constants.ACTIVITY_TYPES.first()) }&#10;    var duration by remember { mutableStateOf(&quot;&quot;) }&#10;    var distance by remember { mutableStateOf(&quot;&quot;) }&#10;    var notes by remember { mutableStateOf(&quot;&quot;) }&#10;&#10;    val isDistanceBased = type in Constants.DISTANCE_BASED_TYPES&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .padding(16.dp),&#10;        verticalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        Text(&quot;Catat aktivitas&quot;, style = MaterialTheme.typography.titleLarge)&#10;        ActivityTypeDropdown(&#10;            label = &quot;Jenis aktivitas&quot;,&#10;            items = Constants.ACTIVITY_TYPES,&#10;            selected = type,&#10;            onTypeSelected = { type = it },&#10;            modifier = Modifier.fillMaxWidth()&#10;        )&#10;        NumberTextField(value = duration, onValueChange = { duration = it }, label = &quot;Durasi (menit)&quot;, modifier = Modifier.fillMaxWidth())&#10;        if (isDistanceBased) {&#10;            NumberTextField(&#10;                value = distance,&#10;                onValueChange = { distance = it },&#10;                label = &quot;Jarak (km)&quot;,&#10;                allowDecimal = true,&#10;                modifier = Modifier.fillMaxWidth()&#10;            )&#10;        }&#10;        TextAreaField(value = notes, onValueChange = { notes = it }, label = &quot;Catatan&quot;)&#10;        Spacer(modifier = Modifier.height(8.dp))&#10;        RowButtons(&#10;            onCancel = onCancel,&#10;            onSave = {&#10;                val durationMinutes = duration.toIntOrNull()&#10;                val distanceKm = distance.toDoubleOrNull()&#10;                val pace = if (isDistanceBased &amp;&amp; durationMinutes != null &amp;&amp; durationMinutes &gt; 0 &amp;&amp; distanceKm != null &amp;&amp; distanceKm &gt; 0.0) {&#10;                    durationMinutes.toDouble() / distanceKm&#10;                } else null&#10;                val calories = if (isDistanceBased &amp;&amp; distanceKm != null) {&#10;                    (Constants.caloriesPerKmFor(type) * distanceKm).toInt()&#10;                } else null&#10;                onSave(&#10;                    ActivityEntry(&#10;                        type = type,&#10;                        durationMinutes = durationMinutes,&#10;                        distanceKm = distanceKm,&#10;                        pace = pace,&#10;                        caloriesBurned = calories,&#10;                        notes = notes.ifBlank { null }&#10;                    )&#10;                )&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun RowButtons(onCancel: () -&gt; Unit, onSave: () -&gt; Unit) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        TextButton(onClick = onCancel, modifier = Modifier.weight(1f)) { Text(&quot;Batal&quot;) }&#10;        Button(onClick = onSave, modifier = Modifier.weight(1f)) { Text(&quot;Simpan&quot;) }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.healynk.ui.screens&#10;&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.unit.dp&#10;import com.example.healynk.models.ActivityEntry&#10;import com.example.healynk.ui.components.ActivityTypeDropdown&#10;import com.example.healynk.ui.components.NumberTextField&#10;import com.example.healynk.ui.components.TextAreaField&#10;import com.example.healynk.utils.Constants&#10;&#10;@Composable&#10;fun AddActivityScreen(&#10;    onSave: (ActivityEntry) -&gt; Unit,&#10;    onCancel: () -&gt; Unit&#10;) {&#10;    var type by remember { mutableStateOf(Constants.ACTIVITY_TYPES.first()) }&#10;    var duration by remember { mutableStateOf(&quot;&quot;) }&#10;    var distance by remember { mutableStateOf(&quot;&quot;) }&#10;    var notes by remember { mutableStateOf(&quot;&quot;) }&#10;&#10;    val isDistanceBased = type in Constants.DISTANCE_BASED_TYPES&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .padding(16.dp),&#10;        verticalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        Text(&quot;Catat aktivitas&quot;, style = MaterialTheme.typography.titleLarge)&#10;        ActivityTypeDropdown(&#10;            label = &quot;Jenis aktivitas&quot;,&#10;            items = Constants.ACTIVITY_TYPES,&#10;            selected = type,&#10;            onTypeSelected = { type = it },&#10;            modifier = Modifier.fillMaxWidth()&#10;        )&#10;        NumberTextField(value = duration, onValueChange = { duration = it }, label = &quot;Durasi (menit)&quot;, modifier = Modifier.fillMaxWidth())&#10;        if (isDistanceBased) {&#10;            NumberTextField(&#10;                value = distance,&#10;                onValueChange = { distance = it },&#10;                label = &quot;Jarak (km)&quot;,&#10;                allowDecimal = true,&#10;                modifier = Modifier.fillMaxWidth()&#10;            )&#10;        }&#10;        TextAreaField(value = notes, onValueChange = { notes = it }, label = &quot;Catatan&quot;)&#10;        Spacer(modifier = Modifier.height(8.dp))&#10;        RowButtons(&#10;            onCancel = onCancel,&#10;            onSave = {&#10;                val durationMinutes = duration.toIntOrNull()&#10;                val distanceKm = distance.toDoubleOrNull()&#10;                val pace = if (isDistanceBased &amp;&amp; durationMinutes != null &amp;&amp; durationMinutes &gt; 0 &amp;&amp; distanceKm != null &amp;&amp; distanceKm &gt; 0.0) {&#10;                    durationMinutes.toDouble() / distanceKm&#10;                } else null&#10;                val calories = if (isDistanceBased &amp;&amp; distanceKm != null) {&#10;                    (Constants.caloriesPerKmFor(type) * distanceKm).toInt()&#10;                } else null&#10;                onSave(&#10;                    ActivityEntry(&#10;                        type = type,&#10;                        durationMinutes = durationMinutes,&#10;                        distanceKm = distanceKm,&#10;                        pace = pace,&#10;                        caloriesBurned = calories,&#10;                        notes = notes.ifBlank { null }&#10;                    )&#10;                )&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun RowButtons(onCancel: () -&gt; Unit, onSave: () -&gt; Unit) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        TextButton(onClick = onCancel, modifier = Modifier.weight(1f)) { Text(&quot;Batal&quot;) }&#10;        Button(onClick = onSave, modifier = Modifier.weight(1f)) { Text(&quot;Simpan&quot;) }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/AddMeasurementScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/AddMeasurementScreen.kt" />
              <option name="originalContent" value="package com.example.healynk.ui.screens&#10;&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.unit.dp&#10;import com.example.healynk.models.Measurement&#10;import com.example.healynk.ui.components.NumberTextField&#10;import com.example.healynk.ui.components.TextAreaField&#10;import androidx.compose.material3.MaterialTheme&#10;&#10;@Composable&#10;fun AddMeasurementScreen(&#10;    onSave: (Measurement) -&gt; Unit,&#10;    onCancel: () -&gt; Unit&#10;) {&#10;    var systolic by remember { mutableStateOf(&quot;&quot;) }&#10;    var diastolic by remember { mutableStateOf(&quot;&quot;) }&#10;    var glucose by remember { mutableStateOf(&quot;&quot;) }&#10;    var notes by remember { mutableStateOf(&quot;&quot;) }&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .padding(16.dp),&#10;        verticalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        Text(&quot;Tekanan darah &amp; gula&quot;, style = MaterialTheme.typography.titleLarge)&#10;        Row(horizontalArrangement = Arrangement.spacedBy(12.dp), modifier = Modifier.fillMaxWidth()) {&#10;            NumberTextField(value = systolic, onValueChange = { systolic = it }, label = &quot;Sistolik&quot;, modifier = Modifier.weight(1f))&#10;            NumberTextField(value = diastolic, onValueChange = { diastolic = it }, label = &quot;Diastolik&quot;, modifier = Modifier.weight(1f))&#10;        }&#10;        NumberTextField(value = glucose, onValueChange = { glucose = it }, label = &quot;Gula darah (mg/dL)&quot;)&#10;        TextAreaField(value = notes, onValueChange = { notes = it }, label = &quot;Catatan&quot;)&#10;        Spacer(modifier = Modifier.height(8.dp))&#10;        Row(horizontalArrangement = Arrangement.spacedBy(12.dp), modifier = Modifier.fillMaxWidth()) {&#10;            TextButton(onClick = onCancel, modifier = Modifier.weight(1f)) { Text(&quot;Batal&quot;) }&#10;            Button(&#10;                onClick = {&#10;                    onSave(&#10;                        Measurement(&#10;                            systolic = systolic.toIntOrNull(),&#10;                            diastolic = diastolic.toIntOrNull(),&#10;                            glucoseMgDl = glucose.toIntOrNull(),&#10;                            notes = notes.ifBlank { null }&#10;                        )&#10;                    )&#10;                },&#10;                modifier = Modifier.weight(1f)&#10;            ) { Text(&quot;Simpan&quot;) }&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.healynk.ui.screens&#13;&#10;&#13;&#10;import androidx.compose.foundation.layout.Arrangement&#13;&#10;import androidx.compose.foundation.layout.Column&#13;&#10;import androidx.compose.foundation.layout.Row&#13;&#10;import androidx.compose.foundation.layout.Spacer&#13;&#10;import androidx.compose.foundation.layout.fillMaxSize&#13;&#10;import androidx.compose.foundation.layout.fillMaxWidth&#13;&#10;import androidx.compose.foundation.layout.height&#13;&#10;import androidx.compose.foundation.layout.padding&#13;&#10;import androidx.compose.material3.Button&#13;&#10;import androidx.compose.material3.OutlinedTextField&#13;&#10;import androidx.compose.material3.Text&#13;&#10;import androidx.compose.material3.TextButton&#13;&#10;import androidx.compose.runtime.Composable&#13;&#10;import androidx.compose.runtime.getValue&#13;&#10;import androidx.compose.runtime.mutableStateOf&#13;&#10;import androidx.compose.runtime.remember&#13;&#10;import androidx.compose.runtime.setValue&#13;&#10;import androidx.compose.ui.Modifier&#13;&#10;import androidx.compose.ui.unit.dp&#13;&#10;import com.example.healynk.models.Measurement&#13;&#10;import com.example.healynk.ui.components.NumberTextField&#13;&#10;import com.example.healynk.ui.components.TextAreaField&#13;&#10;import androidx.compose.material3.MaterialTheme&#13;&#10;&#13;&#10;@Composable&#13;&#10;fun AddMeasurementScreen(&#13;&#10;    onSave: (Measurement) -&gt; Unit,&#13;&#10;    onCancel: () -&gt; Unit&#13;&#10;) {&#13;&#10;    var systolic by remember { mutableStateOf(&quot;&quot;) }&#13;&#10;    var diastolic by remember { mutableStateOf(&quot;&quot;) }&#13;&#10;    var glucose by remember { mutableStateOf(&quot;&quot;) }&#13;&#10;    var notes by remember { mutableStateOf(&quot;&quot;) }&#13;&#10;&#13;&#10;    Column(&#13;&#10;        modifier = Modifier&#13;&#10;            .fillMaxSize()&#13;&#10;            .padding(16.dp),&#13;&#10;        verticalArrangement = Arrangement.spacedBy(12.dp)&#13;&#10;    ) {&#13;&#10;        Text(&quot;Tekanan darah &amp; gula&quot;, style = MaterialTheme.typography.titleLarge)&#13;&#10;        Row(horizontalArrangement = Arrangement.spacedBy(12.dp), modifier = Modifier.fillMaxWidth()) {&#13;&#10;            NumberTextField(value = systolic, onValueChange = { systolic = it }, label = &quot;Sistolik&quot;, modifier = Modifier.weight(1f))&#13;&#10;            NumberTextField(value = diastolic, onValueChange = { diastolic = it }, label = &quot;Diastolik&quot;, modifier = Modifier.weight(1f))&#13;&#10;        }&#13;&#10;        NumberTextField(value = glucose, onValueChange = { glucose = it }, label = &quot;Gula darah (mg/dL)&quot;)&#13;&#10;        TextAreaField(value = notes, onValueChange = { notes = it }, label = &quot;Catatan&quot;)&#13;&#10;        Spacer(modifier = Modifier.height(8.dp))&#13;&#10;        Row(horizontalArrangement = Arrangement.spacedBy(12.dp), modifier = Modifier.fillMaxWidth()) {&#13;&#10;            TextButton(onClick = onCancel, modifier = Modifier.weight(1f)) { Text(&quot;Batal&quot;) }&#13;&#10;            Button(&#13;&#10;                onClick = {&#13;&#10;                    onSave(&#13;&#10;                        Measurement(&#13;&#10;                            systolic = systolic.toIntOrNull(),&#13;&#10;                            diastolic = diastolic.toIntOrNull(),&#13;&#10;                            glucoseMgDl = glucose.toIntOrNull(),&#13;&#10;                            notes = notes.ifBlank { null }&#13;&#10;                        )&#13;&#10;                    )&#13;&#10;                },&#13;&#10;                modifier = Modifier.weight(1f)&#13;&#10;            ) { Text(&quot;Simpan&quot;) }&#13;&#10;        }&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/HomeScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/HomeScreen.kt" />
              <option name="originalContent" value="package com.example.healynk.ui.screens&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.lazy.LazyRow&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.FitnessCenter&#10;import androidx.compose.material.icons.filled.FoodBank&#10;import androidx.compose.material.icons.filled.HealthAndSafety&#10;import androidx.compose.material.icons.filled.MonitorWeight&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.unit.dp&#10;import com.example.healynk.R&#10;import com.example.healynk.ui.components.CalorieRing&#10;import com.example.healynk.ui.components.QuickActionButton&#10;import com.example.healynk.ui.components.SummaryCardSmall&#10;import com.example.healynk.utils.Constants&#10;import com.example.healynk.viewmodel.UiState&#10;import java.util.Locale&#10;&#10;@Composable&#10;fun HomeScreen(&#10;    uiState: UiState,&#10;    onAddMeasurement: () -&gt; Unit,&#10;    onAddBodyStats: () -&gt; Unit,&#10;    onAddActivity: () -&gt; Unit,&#10;    onAddFood: () -&gt; Unit&#10;) {&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(MaterialTheme.colorScheme.background)&#10;            .padding(horizontal = 20.dp, vertical = 12.dp)&#10;    ) {&#10;        HeaderSection(uiState)&#10;        Spacer(modifier = Modifier.height(12.dp))&#10;        CalorieCard(uiState)&#10;        Spacer(modifier = Modifier.height(12.dp))&#10;        SummaryRow(uiState)&#10;        Spacer(modifier = Modifier.height(12.dp))&#10;        QuickActionsRow(onAddMeasurement, onAddBodyStats, onAddActivity, onAddFood)&#10;    }&#10;}&#10;@Composable&#10;private fun HeaderSection(uiState: UiState) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Row(verticalAlignment = Alignment.CenterVertically) {&#10;            Image(&#10;                painter = painterResource(id = R.drawable.ic_healynk_logo),&#10;                contentDescription = Constants.APP_NAME,&#10;                modifier = Modifier.height(40.dp)&#10;            )&#10;            Column(modifier = Modifier.padding(start = 12.dp)) {&#10;                Text(text = Constants.APP_NAME, style = MaterialTheme.typography.titleLarge)&#10;                Text(&#10;                    text = &quot;Halo, ${uiState.userEmail.substringBefore('@', missingDelimiterValue = &quot;User&quot;)}&quot;,&#10;                    style = MaterialTheme.typography.bodyMedium,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun CalorieCard(uiState: UiState) {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surface),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)&#10;    ) {&#10;        Column(modifier = Modifier.padding(16.dp)) {&#10;            Text(text = &quot;Kalori Harian yang Terbakar&quot;, style = MaterialTheme.typography.titleMedium)&#10;            CalorieRing(&#10;                consumed = uiState.dailyActivityCalories,&#10;                target = uiState.dailyCaloriesGoal,&#10;                modifier = Modifier.padding(top = 16.dp),&#10;                label = &quot;Kalori Terbakar&quot;&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun SummaryRow(uiState: UiState) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        SummaryCardSmall(&#10;            modifier = Modifier.weight(1f),&#10;            title = &quot;Aktivitas fisik&quot;,&#10;            subtitle = &quot;Jarak: ${&quot;%.1f&quot;.format(uiState.summaryDistanceKm)} km\nDurasi: ${uiState.summaryDuration} mnt&quot;,&#10;            icon = Icons.Default.FitnessCenter&#10;        )&#10;        val bpText = uiState.latestMeasurement?.let { latest -&gt;&#10;            val bp = if (latest.systolic != null &amp;&amp; latest.diastolic != null) &quot;BP ${latest.systolic}/${latest.diastolic} mmHg&quot; else null&#10;            val glucose = latest.glucoseMgDl?.let { &quot;Gula $it mg/dL&quot; }&#10;            val bmiValue = uiState.latestBmi&#10;            val bmiText = bmiValue?.let { String.format(Locale.getDefault(), &quot;BMI %.1f&quot;, it) }&#10;            val bmiStatus = bmiValue?.let {&#10;                when {&#10;                    it &lt; 18.5 -&gt; &quot;Berat badan rendah&quot;&#10;                    it &lt; 25 -&gt; &quot;Berat badan ideal&quot;&#10;                    it &lt; 30 -&gt; &quot;Berat badan berlebih&quot;&#10;                    else -&gt; &quot;Obesitas&quot;&#10;                }&#10;            }&#10;            listOfNotNull(bp, glucose, bmiText, bmiStatus).ifEmpty { listOf(&quot;Belum ada data&quot;) }.joinToString(&quot; · &quot;)&#10;        } ?: &quot;Belum ada data&quot;&#10;        SummaryCardSmall(&#10;            modifier = Modifier.weight(1f),&#10;            title = &quot;Tekanan darah &amp; gula&quot;,&#10;            subtitle = bpText,&#10;            icon = Icons.Default.HealthAndSafety&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun QuickActionsRow(&#10;    onAddMeasurement: () -&gt; Unit,&#10;    onAddBodyStats: () -&gt; Unit,&#10;    onAddActivity: () -&gt; Unit,&#10;    onAddFood: () -&gt; Unit&#10;) {&#10;    Column(modifier = Modifier.fillMaxWidth()) {&#10;        Row(&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            modifier = Modifier.fillMaxWidth()&#10;        ) {&#10;            Text(text = &quot;Quick actions&quot;, style = MaterialTheme.typography.titleMedium)&#10;            Text(text = &quot;Lihat semua&quot;, style = MaterialTheme.typography.labelLarge, color = MaterialTheme.colorScheme.primary)&#10;        }&#10;        Spacer(modifier = Modifier.height(12.dp))&#10;        LazyRow(horizontalArrangement = Arrangement.spacedBy(16.dp)) {&#10;            items(&#10;                listOf(&#10;                    Triple(&quot;Tinggi &amp; berat&quot;, Icons.Default.MonitorWeight, onAddBodyStats),&#10;                    Triple(&quot;Tekanan darah&quot;, Icons.Default.HealthAndSafety, onAddMeasurement),&#10;                    Triple(&quot;Aktivitas&quot;, Icons.Default.FitnessCenter, onAddActivity),&#10;                    Triple(&quot;Makanan&quot;, Icons.Default.FoodBank, onAddFood)&#10;                )&#10;            ) { (label, icon, action) -&gt;&#10;                QuickActionButton(label = label, icon = icon, onClick = action)&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.healynk.ui.screens&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.lazy.LazyRow&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.FitnessCenter&#10;import androidx.compose.material.icons.filled.FoodBank&#10;import androidx.compose.material.icons.filled.HealthAndSafety&#10;import androidx.compose.material.icons.filled.MonitorWeight&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.unit.dp&#10;import com.example.healynk.R&#10;import com.example.healynk.ui.components.CalorieRing&#10;import com.example.healynk.ui.components.QuickActionButton&#10;import com.example.healynk.ui.components.SummaryCardSmall&#10;import com.example.healynk.utils.Constants&#10;import com.example.healynk.viewmodel.UiState&#10;import java.util.Locale&#10;&#10;@Composable&#10;fun HomeScreen(&#10;    uiState: UiState,&#10;    onAddMeasurement: () -&gt; Unit,&#10;    onAddBodyStats: () -&gt; Unit,&#10;    onAddActivity: () -&gt; Unit,&#10;    onAddFood: () -&gt; Unit&#10;) {&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(MaterialTheme.colorScheme.background)&#10;            .padding(horizontal = 20.dp, vertical = 12.dp)&#10;    ) {&#10;        HeaderSection(uiState)&#10;        Spacer(modifier = Modifier.height(12.dp))&#10;        CalorieCard(uiState)&#10;        Spacer(modifier = Modifier.height(12.dp))&#10;        SummaryRow(uiState)&#10;        Spacer(modifier = Modifier.height(12.dp))&#10;        QuickActionsRow(onAddMeasurement, onAddBodyStats, onAddActivity, onAddFood)&#10;    }&#10;}&#10;@Composable&#10;private fun HeaderSection(uiState: UiState) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Row(verticalAlignment = Alignment.CenterVertically) {&#10;            Image(&#10;                painter = painterResource(id = R.drawable.ic_healynk_logo),&#10;                contentDescription = Constants.APP_NAME,&#10;                modifier = Modifier.height(40.dp)&#10;            )&#10;            Column(modifier = Modifier.padding(start = 12.dp)) {&#10;                Text(text = Constants.APP_NAME, style = MaterialTheme.typography.titleLarge)&#10;                Text(&#10;                    text = &quot;Halo, ${uiState.userEmail.substringBefore('@', missingDelimiterValue = &quot;User&quot;)}&quot;,&#10;                    style = MaterialTheme.typography.bodyMedium,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun CalorieCard(uiState: UiState) {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surface),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)&#10;    ) {&#10;        Column(modifier = Modifier.padding(16.dp)) {&#10;            Text(text = &quot;Kalori Harian yang Terbakar&quot;, style = MaterialTheme.typography.titleMedium)&#10;            CalorieRing(&#10;                consumed = uiState.dailyActivityCalories,&#10;                target = uiState.dailyCaloriesGoal,&#10;                modifier = Modifier.padding(top = 16.dp),&#10;                label = &quot;Kalori Terbakar&quot;&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun SummaryRow(uiState: UiState) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        SummaryCardSmall(&#10;            modifier = Modifier.weight(1f),&#10;            title = &quot;Aktivitas fisik&quot;,&#10;            subtitle = &quot;Jarak: ${&quot;%.1f&quot;.format(uiState.summaryDistanceKm)} km\nDurasi: ${uiState.summaryDuration} mnt&quot;,&#10;            icon = Icons.Default.FitnessCenter&#10;        )&#10;        val bpText = uiState.latestMeasurement?.let { latest -&gt;&#10;            val bp = if (latest.systolic != null &amp;&amp; latest.diastolic != null) &quot;BP ${latest.systolic}/${latest.diastolic} mmHg&quot; else null&#10;            val glucose = latest.glucoseMgDl?.let { &quot;Gula $it mg/dL&quot; }&#10;            val bmiValue = uiState.latestBmi&#10;            val bmiText = bmiValue?.let { String.format(Locale.getDefault(), &quot;BMI %.1f&quot;, it) }&#10;            val bmiStatus = bmiValue?.let {&#10;                when {&#10;                    it &lt; 18.5 -&gt; &quot;Berat badan rendah&quot;&#10;                    it &lt; 25 -&gt; &quot;Berat badan ideal&quot;&#10;                    it &lt; 30 -&gt; &quot;Berat badan berlebih&quot;&#10;                    else -&gt; &quot;Obesitas&quot;&#10;                }&#10;            }&#10;            listOfNotNull(bp, glucose, bmiText, bmiStatus).ifEmpty { listOf(&quot;Belum ada data&quot;) }.joinToString(&quot; · &quot;)&#10;        } ?: &quot;Belum ada data&quot;&#10;        SummaryCardSmall(&#10;            modifier = Modifier.weight(1f),&#10;            title = &quot;Tekanan darah &amp; gula&quot;,&#10;            subtitle = bpText,&#10;            icon = Icons.Default.HealthAndSafety&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun QuickActionsRow(&#10;    onAddMeasurement: () -&gt; Unit,&#10;    onAddBodyStats: () -&gt; Unit,&#10;    onAddActivity: () -&gt; Unit,&#10;    onAddFood: () -&gt; Unit&#10;) {&#10;    Column(modifier = Modifier.fillMaxWidth()) {&#10;        Row(&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            modifier = Modifier.fillMaxWidth()&#10;        ) {&#10;            Text(text = &quot;Quick actions&quot;, style = MaterialTheme.typography.titleMedium)&#10;            Text(text = &quot;Lihat semua&quot;, style = MaterialTheme.typography.labelLarge, color = MaterialTheme.colorScheme.primary)&#10;        }&#10;        Spacer(modifier = Modifier.height(12.dp))&#10;        LazyRow(horizontalArrangement = Arrangement.spacedBy(16.dp)) {&#10;            items(&#10;                listOf(&#10;                    Triple(&quot;Tinggi &amp; berat&quot;, Icons.Default.MonitorWeight, onAddBodyStats),&#10;                    Triple(&quot;Tekanan darah&quot;, Icons.Default.HealthAndSafety, onAddMeasurement),&#10;                    Triple(&quot;Aktivitas&quot;, Icons.Default.FitnessCenter, onAddActivity),&#10;                    Triple(&quot;Makanan&quot;, Icons.Default.FoodBank, onAddFood)&#10;                )&#10;            ) { (label, icon, action) -&gt;&#10;                QuickActionButton(label = label, icon = icon, onClick = action)&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/MainShell.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/MainShell.kt" />
              <option name="originalContent" value="package com.example.healynk.ui.screens&#10;&#10;import android.net.Uri&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Analytics&#10;import androidx.compose.material.icons.filled.History&#10;import androidx.compose.material.icons.filled.Home&#10;import androidx.compose.material.icons.filled.Settings&#10;import androidx.compose.material3.NavigationBar&#10;import androidx.compose.material3.NavigationBarItem&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.ui.Modifier&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.currentBackStackEntryAsState&#10;import androidx.navigation.compose.rememberNavController&#10;import com.example.healynk.utils.Constants&#10;import com.example.healynk.viewmodel.UiState&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.navigation.NavGraph.Companion.findStartDestination&#10;import com.example.healynk.models.Measurement&#10;import com.example.healynk.models.ActivityEntry&#10;import com.example.healynk.models.FoodEntry&#10;&#10;@Composable&#10;fun MainShell(&#10;    uiState: UiState,&#10;    onAddMeasurement: () -&gt; Unit,&#10;    onAddBodyStats: () -&gt; Unit,&#10;    onAddActivity: () -&gt; Unit,&#10;    onAddFood: () -&gt; Unit,&#10;    onSignOut: () -&gt; Unit,&#10;    onRemovePin: () -&gt; Unit,&#10;    onUpdateDisplayName: (String) -&gt; Unit,&#10;    onUpdatePhotoUrl: (String?) -&gt; Unit,&#10;    onUpdateEmail: (String) -&gt; Unit,&#10;    onUpdatePassword: (String) -&gt; Unit,&#10;    onDeleteMeasurement: (String) -&gt; Unit,&#10;    onDeleteActivity: (String) -&gt; Unit,&#10;    onDeleteFood: (String) -&gt; Unit,&#10;    onRestoreMeasurement: (Measurement) -&gt; Unit,&#10;    onRestoreActivity: (ActivityEntry) -&gt; Unit,&#10;    onRestoreFood: (FoodEntry) -&gt; Unit,&#10;    onUploadPhoto: (Uri) -&gt; Unit,&#10;    onUpdateBurnGoal: (Int) -&gt; Unit&#10;) {&#10;    val navController = rememberNavController()&#10;    Scaffold(&#10;        bottomBar = {&#10;            NavigationBar {&#10;                val navBackStackEntry by navController.currentBackStackEntryAsState()&#10;                val currentDestination = navBackStackEntry?.destination?.route&#10;                val items = listOf(&#10;                    NavItem(Constants.ROUTE_HOME, &quot;Home&quot;, Icons.Default.Home),&#10;                    NavItem(Constants.ROUTE_HISTORY, &quot;History&quot;, Icons.Default.History),&#10;                    NavItem(Constants.ROUTE_ANALYTICS, &quot;Analytics&quot;, Icons.Default.Analytics),&#10;                    NavItem(Constants.ROUTE_SETTINGS, &quot;Settings&quot;, Icons.Default.Settings)&#10;                )&#10;                items.forEach { item -&gt;&#10;                    NavigationBarItem(&#10;                        selected = currentDestination == item.route,&#10;                        onClick = {&#10;                            navController.navigate(item.route) {&#10;                                popUpTo(navController.graph.findStartDestination().id) {&#10;                                    saveState = true&#10;                                }&#10;                                launchSingleTop = true&#10;                                restoreState = true&#10;                            }&#10;                        },&#10;                        icon = { Icon(item.icon, contentDescription = item.label) },&#10;                        label = { Text(item.label) }&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    ) { paddingValues -&gt;&#10;        NavHost(&#10;            navController = navController,&#10;            startDestination = Constants.ROUTE_HOME,&#10;            modifier = Modifier.padding(paddingValues)&#10;        ) {&#10;            composable(Constants.ROUTE_HOME) {&#10;                HomeScreen(&#10;                    uiState = uiState,&#10;                    onAddMeasurement = onAddMeasurement,&#10;                    onAddBodyStats = onAddBodyStats,&#10;                    onAddActivity = onAddActivity,&#10;                    onAddFood = onAddFood&#10;                )&#10;            }&#10;            composable(Constants.ROUTE_HISTORY) {&#10;                HistoryScreen(&#10;                    uiState = uiState,&#10;                    onDeleteMeasurement = onDeleteMeasurement,&#10;                    onDeleteActivity = onDeleteActivity,&#10;                    onDeleteFood = onDeleteFood,&#10;                    onRestoreMeasurement = onRestoreMeasurement,&#10;                    onRestoreActivity = onRestoreActivity,&#10;                    onRestoreFood = onRestoreFood&#10;                )&#10;            }&#10;            composable(Constants.ROUTE_ANALYTICS) {&#10;                AnalyticsScreen(uiState = uiState)&#10;            }&#10;            composable(Constants.ROUTE_SETTINGS) {&#10;                SettingsScreen(&#10;                    uiState = uiState,&#10;                    onSignOut = onSignOut,&#10;                    onRemovePin = onRemovePin,&#10;                    onUpdateDisplayName = onUpdateDisplayName,&#10;                    onUpdatePhotoUrl = onUpdatePhotoUrl,&#10;                    onUpdateEmail = onUpdateEmail,&#10;                    onUpdatePassword = onUpdatePassword,&#10;                    onUploadPhoto = onUploadPhoto,&#10;                    onUpdateBurnGoal = onUpdateBurnGoal&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;private data class NavItem(val route: String, val label: String, val icon: ImageVector)&#10;" />
              <option name="updatedContent" value="package com.example.healynk.ui.screens&#10;&#10;import android.net.Uri&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Analytics&#10;import androidx.compose.material.icons.filled.History&#10;import androidx.compose.material.icons.filled.Home&#10;import androidx.compose.material.icons.filled.Settings&#10;import androidx.compose.material3.NavigationBar&#10;import androidx.compose.material3.NavigationBarItem&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.ui.Modifier&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.currentBackStackEntryAsState&#10;import androidx.navigation.compose.rememberNavController&#10;import com.example.healynk.utils.Constants&#10;import com.example.healynk.viewmodel.UiState&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.navigation.NavGraph.Companion.findStartDestination&#10;import com.example.healynk.models.Measurement&#10;import com.example.healynk.models.ActivityEntry&#10;import com.example.healynk.models.FoodEntry&#10;&#10;@Composable&#10;fun MainShell(&#10;    uiState: UiState,&#10;    onAddMeasurement: () -&gt; Unit,&#10;    onAddBodyStats: () -&gt; Unit,&#10;    onAddActivity: () -&gt; Unit,&#10;    onAddFood: () -&gt; Unit,&#10;    onSignOut: () -&gt; Unit,&#10;    onRemovePin: () -&gt; Unit,&#10;    onUpdateDisplayName: (String) -&gt; Unit,&#10;    onUpdatePhotoUrl: (String?) -&gt; Unit,&#10;    onUpdateEmail: (String) -&gt; Unit,&#10;    onUpdatePassword: (String) -&gt; Unit,&#10;    onDeleteMeasurement: (String) -&gt; Unit,&#10;    onDeleteActivity: (String) -&gt; Unit,&#10;    onDeleteFood: (String) -&gt; Unit,&#10;    onRestoreMeasurement: (Measurement) -&gt; Unit,&#10;    onRestoreActivity: (ActivityEntry) -&gt; Unit,&#10;    onRestoreFood: (FoodEntry) -&gt; Unit,&#10;    onUploadPhoto: (Uri) -&gt; Unit,&#10;    onUpdateBurnGoal: (Int) -&gt; Unit&#10;) {&#10;    val navController = rememberNavController()&#10;    Scaffold(&#10;        bottomBar = {&#10;            NavigationBar {&#10;                val navBackStackEntry by navController.currentBackStackEntryAsState()&#10;                val currentDestination = navBackStackEntry?.destination?.route&#10;                val items = listOf(&#10;                    NavItem(Constants.ROUTE_HOME, &quot;Home&quot;, Icons.Default.Home),&#10;                    NavItem(Constants.ROUTE_HISTORY, &quot;History&quot;, Icons.Default.History),&#10;                    NavItem(Constants.ROUTE_ANALYTICS, &quot;Analytics&quot;, Icons.Default.Analytics),&#10;                    NavItem(Constants.ROUTE_SETTINGS, &quot;Settings&quot;, Icons.Default.Settings)&#10;                )&#10;                items.forEach { item -&gt;&#10;                    NavigationBarItem(&#10;                        selected = currentDestination == item.route,&#10;                        onClick = {&#10;                            navController.navigate(item.route) {&#10;                                popUpTo(navController.graph.findStartDestination().id) {&#10;                                    saveState = true&#10;                                }&#10;                                launchSingleTop = true&#10;                                restoreState = true&#10;                            }&#10;                        },&#10;                        icon = { Icon(item.icon, contentDescription = item.label) },&#10;                        label = { Text(item.label) }&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    ) { paddingValues -&gt;&#10;        NavHost(&#10;            navController = navController,&#10;            startDestination = Constants.ROUTE_HOME,&#10;            modifier = Modifier.padding(paddingValues)&#10;        ) {&#10;            composable(Constants.ROUTE_HOME) {&#10;                HomeScreen(&#10;                    uiState = uiState,&#10;                    onAddMeasurement = onAddMeasurement,&#10;                    onAddBodyStats = onAddBodyStats,&#10;                    onAddActivity = onAddActivity,&#10;                    onAddFood = onAddFood&#10;                )&#10;            }&#10;            composable(Constants.ROUTE_HISTORY) {&#10;                HistoryScreen(&#10;                    uiState = uiState,&#10;                    onDeleteMeasurement = onDeleteMeasurement,&#10;                    onDeleteActivity = onDeleteActivity,&#10;                    onDeleteFood = onDeleteFood,&#10;                    onRestoreMeasurement = onRestoreMeasurement,&#10;                    onRestoreActivity = onRestoreActivity,&#10;                    onRestoreFood = onRestoreFood&#10;                )&#10;            }&#10;            composable(Constants.ROUTE_ANALYTICS) {&#10;                AnalyticsScreen(uiState = uiState)&#10;            }&#10;            composable(Constants.ROUTE_SETTINGS) {&#10;                SettingsScreen(&#10;                    uiState = uiState,&#10;                    onSignOut = onSignOut,&#10;                    onRemovePin = onRemovePin,&#10;                    onUpdateDisplayName = onUpdateDisplayName,&#10;                    onUpdatePhotoUrl = onUpdatePhotoUrl,&#10;                    onUpdateEmail = onUpdateEmail,&#10;                    onUpdatePassword = onUpdatePassword,&#10;                    onUploadPhoto = onUploadPhoto,&#10;                    onUpdateBurnGoal = onUpdateBurnGoal&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;private data class NavItem(val route: String, val label: String, val icon: ImageVector)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/RegisterScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/RegisterScreen.kt" />
              <option name="originalContent" value="package com.example.healynk.ui.screens&#10;&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.SnackbarHost&#10;import androidx.compose.material3.SnackbarHostState&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun RegisterScreen(&#10;    onRegister: (String, String) -&gt; Unit,&#10;    onNavigateLogin: () -&gt; Unit,&#10;    onRegistrationConsumed: () -&gt; Unit,&#10;    errorMessage: String?,&#10;    registrationSuccess: Boolean&#10;) {&#10;    val (email, setEmail) = remember { mutableStateOf(&quot;&quot;) }&#10;    val (password, setPassword) = remember { mutableStateOf(&quot;&quot;) }&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;&#10;    LaunchedEffect(registrationSuccess) {&#10;        if (registrationSuccess) {&#10;            snackbarHostState.showSnackbar(&quot;Pendaftaran berhasil, silakan login&quot;)&#10;            onRegistrationConsumed()&#10;            onNavigateLogin()&#10;        }&#10;    }&#10;&#10;    Scaffold(snackbarHost = { SnackbarHost(snackbarHostState) }) { paddingValues -&gt;&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(24.dp)&#10;                .padding(paddingValues),&#10;            verticalArrangement = Arrangement.Center&#10;        ) {&#10;            Text(text = &quot;Daftar akun Healynk&quot;, style = MaterialTheme.typography.headlineMedium)&#10;            OutlinedTextField(&#10;                value = email,&#10;                onValueChange = setEmail,&#10;                label = { Text(&quot;Email&quot;) },&#10;                keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Email),&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(top = 16.dp)&#10;            )&#10;            OutlinedTextField(&#10;                value = password,&#10;                onValueChange = setPassword,&#10;                label = { Text(&quot;Password&quot;) },&#10;                visualTransformation = PasswordVisualTransformation(),&#10;                keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(top = 12.dp)&#10;            )&#10;            errorMessage?.let {&#10;                Text(text = it, color = MaterialTheme.colorScheme.error, modifier = Modifier.padding(top = 8.dp))&#10;            }&#10;            Button(&#10;                onClick = { onRegister(email, password) },&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(top = 16.dp)&#10;            ) {&#10;                Text(&quot;Daftar&quot;)&#10;            }&#10;            TextButton(&#10;                onClick = onNavigateLogin,&#10;                modifier = Modifier.align(Alignment.CenterHorizontally)&#10;            ) {&#10;                Text(&quot;Sudah punya akun? Masuk&quot;)&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.healynk.ui.screens&#10;&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.SnackbarHost&#10;import androidx.compose.material3.SnackbarHostState&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun RegisterScreen(&#10;    onRegister: (String, String) -&gt; Unit,&#10;    onNavigateLogin: () -&gt; Unit,&#10;    onRegistrationConsumed: () -&gt; Unit,&#10;    errorMessage: String?,&#10;    registrationSuccess: Boolean&#10;) {&#10;    val (email, setEmail) = remember { mutableStateOf(&quot;&quot;) }&#10;    val (password, setPassword) = remember { mutableStateOf(&quot;&quot;) }&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;&#10;    LaunchedEffect(registrationSuccess) {&#10;        if (registrationSuccess) {&#10;            snackbarHostState.showSnackbar(&quot;Pendaftaran berhasil, silakan login&quot;)&#10;            onRegistrationConsumed()&#10;            onNavigateLogin()&#10;        }&#10;    }&#10;&#10;    Scaffold(snackbarHost = { SnackbarHost(snackbarHostState) }) { paddingValues -&gt;&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(24.dp)&#10;                .padding(paddingValues),&#10;            verticalArrangement = Arrangement.Center&#10;        ) {&#10;            Text(text = &quot;Daftar akun Healynk&quot;, style = MaterialTheme.typography.headlineMedium)&#10;            OutlinedTextField(&#10;                value = email,&#10;                onValueChange = setEmail,&#10;                label = { Text(&quot;Email&quot;) },&#10;                keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Email),&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(top = 16.dp)&#10;            )&#10;            OutlinedTextField(&#10;                value = password,&#10;                onValueChange = setPassword,&#10;                label = { Text(&quot;Password&quot;) },&#10;                visualTransformation = PasswordVisualTransformation(),&#10;                keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(top = 12.dp)&#10;            )&#10;            errorMessage?.let {&#10;                Text(text = it, color = MaterialTheme.colorScheme.error, modifier = Modifier.padding(top = 8.dp))&#10;            }&#10;            Button(&#10;                onClick = { onRegister(email, password) },&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(top = 16.dp)&#10;            ) {&#10;                Text(&quot;Daftar&quot;)&#10;            }&#10;            TextButton(&#10;                onClick = onNavigateLogin,&#10;                modifier = Modifier.align(Alignment.CenterHorizontally)&#10;            ) {&#10;                Text(&quot;Sudah punya akun? Masuk&quot;)&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/SettingsScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/ui/screens/SettingsScreen.kt" />
              <option name="originalContent" value="package com.example.healynk.ui.screens&#10;&#10;import android.net.Uri&#10;import androidx.activity.compose.rememberLauncherForActivityResult&#10;import androidx.activity.result.PickVisualMediaRequest&#10;import androidx.activity.result.contract.ActivityResultContracts&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.ColumnScope&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.layout.size&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.material3.AlertDialog&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.material3.TextField&#10;import androidx.compose.material3.TextFieldDefaults&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import coil.compose.AsyncImage&#10;import com.example.healynk.R&#10;import com.example.healynk.viewmodel.UiState&#10;import androidx.compose.material3.HorizontalDivider&#10;import androidx.compose.ui.text.font.FontWeight&#10;&#10;@Composable&#10;fun SettingsScreen(&#10;    uiState: UiState,&#10;    onSignOut: () -&gt; Unit,&#10;    onRemovePin: () -&gt; Unit,&#10;    onUpdateDisplayName: (String) -&gt; Unit,&#10;    onUpdatePhotoUrl: (String?) -&gt; Unit,&#10;    onUpdateEmail: (String) -&gt; Unit,&#10;    onUpdatePassword: (String) -&gt; Unit,&#10;    onUploadPhoto: (Uri) -&gt; Unit,&#10;    onUpdateBurnGoal: (Int) -&gt; Unit,&#10;) {&#10;    val photoPickerLauncher = rememberLauncherForActivityResult(ActivityResultContracts.PickVisualMedia()) { uri -&gt;&#10;        uri?.let(onUploadPhoto)&#10;    }&#10;&#10;    var showNameDialog by remember { mutableStateOf(false) }&#10;    var showEmailDialog by remember { mutableStateOf(false) }&#10;    var showPasswordDialog by remember { mutableStateOf(false) }&#10;    var nameInput by remember { mutableStateOf(&quot;&quot;) }&#10;    var emailInput by remember { mutableStateOf(&quot;&quot;) }&#10;    var passwordInput by remember { mutableStateOf(&quot;&quot;) }&#10;    var burnGoalInput by remember { mutableStateOf(uiState.dailyCaloriesGoal.toString()) }&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .padding(16.dp),&#10;        verticalArrangement = Arrangement.spacedBy(16.dp)&#10;    ) {&#10;        Text(&quot;Settings&quot;, style = MaterialTheme.typography.headlineSmall)&#10;        CardSection(title = &quot;Profil&quot;) {&#10;            Row(verticalAlignment = Alignment.CenterVertically) {&#10;                ProfileAvatar(photoUrl = uiState.photoUrl)&#10;                Column(modifier = Modifier.padding(start = 12.dp)) {&#10;                    Text(&#10;                        text = uiState.displayName.ifBlank { &quot;Pengguna&quot; },&#10;                        style = MaterialTheme.typography.titleMedium&#10;                    )&#10;                    Text(uiState.userEmail.ifBlank { &quot;Belum ada email&quot; })&#10;                }&#10;            }&#10;            SettingsActionRow(&#10;                title = &quot;Ubah username&quot;,&#10;                subtitle = &quot;Perbarui nama profil&quot;&#10;            ) {&#10;                nameInput = uiState.displayName&#10;                showNameDialog = true&#10;            }&#10;            SettingsActionRow(&#10;                title = &quot;Ubah foto profil&quot;,&#10;                subtitle = &quot;Ambil dari galeri&quot;&#10;            ) {&#10;                photoPickerLauncher.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageOnly))&#10;            }&#10;            SettingsActionRow(&#10;                title = &quot;Ubah email&quot;,&#10;                subtitle = &quot;Ganti alamat login&quot;&#10;            ) {&#10;                emailInput = uiState.userEmail&#10;                showEmailDialog = true&#10;            }&#10;            SettingsActionRow(&#10;                title = &quot;Ubah password&quot;,&#10;                subtitle = &quot;Setel ulang kata sandi&quot;&#10;            ) {&#10;                passwordInput = &quot;&quot;&#10;                showPasswordDialog = true&#10;            }&#10;        }&#10;        CardSection(title = &quot;Keamanan&quot;) {&#10;            Row(modifier = Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.SpaceBetween) {&#10;                Column {&#10;                    Text(&quot;PIN lokal&quot;, fontWeight = FontWeight.Bold)&#10;                    Text(if (uiState.hasPin) &quot;PIN aktif&quot; else &quot;Belum ada PIN&quot;)&#10;                }&#10;                TextButton(onClick = onRemovePin, enabled = uiState.hasPin) {&#10;                    Text(&quot;Hapus PIN&quot;)&#10;                }&#10;            }&#10;        }&#10;        CardSection(title = &quot;Target Kalori Terbakar&quot;) {&#10;            OutlinedTextField(&#10;                value = burnGoalInput,&#10;                onValueChange = { text -&gt;&#10;                    val sanitized = text.filter { it.isDigit() }&#10;                    burnGoalInput = sanitized&#10;                    sanitized.toIntOrNull()?.let(onUpdateBurnGoal)&#10;                },&#10;                label = { Text(&quot;Target harian (kcal)&quot;) },&#10;                modifier = Modifier.fillMaxWidth(),&#10;                keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number)&#10;            )&#10;        }&#10;        uiState.error?.let {&#10;            Text(text = it, color = MaterialTheme.colorScheme.error)&#10;        }&#10;        Spacer(modifier = Modifier.height(24.dp))&#10;        Button(onClick = onSignOut, modifier = Modifier.fillMaxWidth()) {&#10;            Text(&quot;Logout&quot;)&#10;        }&#10;    }&#10;&#10;    if (showNameDialog) {&#10;        EditValueDialog(&#10;            title = &quot;Ubah username&quot;,&#10;            value = nameInput,&#10;            onValueChange = { nameInput = it },&#10;            confirmLabel = &quot;Simpan&quot;&#10;        ) {&#10;            if (nameInput.isNotBlank()) {&#10;                onUpdateDisplayName(nameInput)&#10;            }&#10;            showNameDialog = false&#10;        }&#10;    }&#10;    if (showEmailDialog) {&#10;        EditValueDialog(&#10;            title = &quot;Ubah email&quot;,&#10;            value = emailInput,&#10;            onValueChange = { emailInput = it },&#10;            confirmLabel = &quot;Simpan&quot;&#10;        ) {&#10;            if (emailInput.isNotBlank()) {&#10;                onUpdateEmail(emailInput)&#10;            }&#10;            showEmailDialog = false&#10;        }&#10;    }&#10;    if (showPasswordDialog) {&#10;        EditValueDialog(&#10;            title = &quot;Ubah password&quot;,&#10;            value = passwordInput,&#10;            onValueChange = { passwordInput = it },&#10;            confirmLabel = &quot;Simpan&quot;,&#10;            isPassword = true&#10;        ) {&#10;            if (passwordInput.length &gt;= 6) {&#10;                onUpdatePassword(passwordInput)&#10;            }&#10;            showPasswordDialog = false&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun CardSection(title: String, content: @Composable ColumnScope.() -&gt; Unit) {&#10;    Card(colors = CardDefaults.cardColors(MaterialTheme.colorScheme.surface)) {&#10;        Column(&#10;            modifier = Modifier.padding(16.dp),&#10;            verticalArrangement = Arrangement.spacedBy(8.dp)&#10;        ) {&#10;            Text(title, style = MaterialTheme.typography.titleMedium)&#10;            HorizontalDivider()&#10;            content()&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ProfileAvatar(photoUrl: String?) {&#10;    if (photoUrl.isNullOrBlank()) {&#10;        Image(&#10;            painter = androidx.compose.ui.res.painterResource(id = R.drawable.ic_healynk_logo),&#10;            contentDescription = &quot;Avatar&quot;,&#10;            modifier = Modifier&#10;                .size(56.dp)&#10;                .clip(CircleShape)&#10;        )&#10;    } else {&#10;        AsyncImage(&#10;            model = photoUrl,&#10;            contentDescription = &quot;Avatar&quot;,&#10;            modifier = Modifier&#10;                .size(56.dp)&#10;                .clip(CircleShape)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun SettingsActionRow(&#10;    title: String,&#10;    subtitle: String,&#10;    onClick: () -&gt; Unit&#10;) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Column(modifier = Modifier.weight(1f)) {&#10;            Text(title, fontWeight = FontWeight.Bold)&#10;            Text(subtitle, style = MaterialTheme.typography.bodySmall, color = MaterialTheme.colorScheme.onSurfaceVariant)&#10;        }&#10;        TextButton(onClick = onClick) {&#10;            Text(&quot;Edit&quot;)&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun EditValueDialog(&#10;    title: String,&#10;    value: String,&#10;    onValueChange: (String) -&gt; Unit,&#10;    confirmLabel: String,&#10;    isPassword: Boolean = false,&#10;    onConfirm: () -&gt; Unit&#10;) {&#10;    AlertDialog(&#10;        onDismissRequest = onConfirm,&#10;        title = { Text(title) },&#10;        text = {&#10;            TextField(&#10;                value = value,&#10;                onValueChange = onValueChange,&#10;                modifier = Modifier.fillMaxWidth(),&#10;                singleLine = true,&#10;                visualTransformation = if (isPassword) PasswordVisualTransformation() else androidx.compose.ui.text.input.VisualTransformation.None,&#10;                keyboardOptions = if (isPassword) KeyboardOptions.Default else KeyboardOptions.Default,&#10;                colors = TextFieldDefaults.colors(&#10;                    focusedContainerColor = Color.Transparent,&#10;                    unfocusedContainerColor = Color.Transparent&#10;                )&#10;            )&#10;        },&#10;        confirmButton = {&#10;            TextButton(onClick = onConfirm) { Text(confirmLabel) }&#10;        }&#10;    )&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.healynk.ui.screens&#10;&#10;import android.net.Uri&#10;import androidx.activity.compose.rememberLauncherForActivityResult&#10;import androidx.activity.result.PickVisualMediaRequest&#10;import androidx.activity.result.contract.ActivityResultContracts&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.ColumnScope&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.layout.size&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.material3.AlertDialog&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.material3.TextField&#10;import androidx.compose.material3.TextFieldDefaults&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import coil.compose.AsyncImage&#10;import com.example.healynk.R&#10;import com.example.healynk.viewmodel.UiState&#10;import androidx.compose.material3.HorizontalDivider&#10;import androidx.compose.ui.text.font.FontWeight&#10;&#10;@Composable&#10;fun SettingsScreen(&#10;    uiState: UiState,&#10;    onSignOut: () -&gt; Unit,&#10;    onRemovePin: () -&gt; Unit,&#10;    onUpdateDisplayName: (String) -&gt; Unit,&#10;    onUpdatePhotoUrl: (String?) -&gt; Unit,&#10;    onUpdateEmail: (String) -&gt; Unit,&#10;    onUpdatePassword: (String) -&gt; Unit,&#10;    onUploadPhoto: (Uri) -&gt; Unit,&#10;    onUpdateBurnGoal: (Int) -&gt; Unit,&#10;) {&#10;    val photoPickerLauncher = rememberLauncherForActivityResult(ActivityResultContracts.PickVisualMedia()) { uri -&gt;&#10;        uri?.let(onUploadPhoto)&#10;    }&#10;&#10;    var showNameDialog by remember { mutableStateOf(false) }&#10;    var showEmailDialog by remember { mutableStateOf(false) }&#10;    var showPasswordDialog by remember { mutableStateOf(false) }&#10;    var nameInput by remember { mutableStateOf(&quot;&quot;) }&#10;    var emailInput by remember { mutableStateOf(&quot;&quot;) }&#10;    var passwordInput by remember { mutableStateOf(&quot;&quot;) }&#10;    var burnGoalInput by remember { mutableStateOf(uiState.dailyCaloriesGoal.toString()) }&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .padding(16.dp),&#10;        verticalArrangement = Arrangement.spacedBy(16.dp)&#10;    ) {&#10;        Text(&quot;Settings&quot;, style = MaterialTheme.typography.headlineSmall)&#10;        CardSection(title = &quot;Profil&quot;) {&#10;            Row(verticalAlignment = Alignment.CenterVertically) {&#10;                ProfileAvatar(photoUrl = uiState.photoUrl)&#10;                Column(modifier = Modifier.padding(start = 12.dp)) {&#10;                    Text(&#10;                        text = uiState.displayName.ifBlank { &quot;Pengguna&quot; },&#10;                        style = MaterialTheme.typography.titleMedium&#10;                    )&#10;                    Text(uiState.userEmail.ifBlank { &quot;Belum ada email&quot; })&#10;                }&#10;            }&#10;            SettingsActionRow(&#10;                title = &quot;Ubah username&quot;,&#10;                subtitle = &quot;Perbarui nama profil&quot;&#10;            ) {&#10;                nameInput = uiState.displayName&#10;                showNameDialog = true&#10;            }&#10;            SettingsActionRow(&#10;                title = &quot;Ubah foto profil&quot;,&#10;                subtitle = &quot;Ambil dari galeri&quot;&#10;            ) {&#10;                photoPickerLauncher.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageOnly))&#10;            }&#10;            SettingsActionRow(&#10;                title = &quot;Ubah email&quot;,&#10;                subtitle = &quot;Ganti alamat login&quot;&#10;            ) {&#10;                emailInput = uiState.userEmail&#10;                showEmailDialog = true&#10;            }&#10;            SettingsActionRow(&#10;                title = &quot;Ubah password&quot;,&#10;                subtitle = &quot;Setel ulang kata sandi&quot;&#10;            ) {&#10;                passwordInput = &quot;&quot;&#10;                showPasswordDialog = true&#10;            }&#10;        }&#10;        CardSection(title = &quot;Keamanan&quot;) {&#10;            Row(modifier = Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.SpaceBetween) {&#10;                Column {&#10;                    Text(&quot;PIN lokal&quot;, fontWeight = FontWeight.Bold)&#10;                    Text(if (uiState.hasPin) &quot;PIN aktif&quot; else &quot;Belum ada PIN&quot;)&#10;                }&#10;                TextButton(onClick = onRemovePin, enabled = uiState.hasPin) {&#10;                    Text(&quot;Hapus PIN&quot;)&#10;                }&#10;            }&#10;        }&#10;        CardSection(title = &quot;Target Kalori Terbakar&quot;) {&#10;            OutlinedTextField(&#10;                value = burnGoalInput,&#10;                onValueChange = { text -&gt;&#10;                    val sanitized = text.filter { it.isDigit() }&#10;                    burnGoalInput = sanitized&#10;                    sanitized.toIntOrNull()?.let(onUpdateBurnGoal)&#10;                },&#10;                label = { Text(&quot;Target harian (kcal)&quot;) },&#10;                modifier = Modifier.fillMaxWidth(),&#10;                keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number)&#10;            )&#10;        }&#10;        uiState.error?.let {&#10;            Text(text = it, color = MaterialTheme.colorScheme.error)&#10;        }&#10;        Spacer(modifier = Modifier.height(24.dp))&#10;        Button(onClick = onSignOut, modifier = Modifier.fillMaxWidth()) {&#10;            Text(&quot;Logout&quot;)&#10;        }&#10;    }&#10;&#10;    if (showNameDialog) {&#10;        EditValueDialog(&#10;            title = &quot;Ubah username&quot;,&#10;            value = nameInput,&#10;            onValueChange = { nameInput = it },&#10;            confirmLabel = &quot;Simpan&quot;&#10;        ) {&#10;            if (nameInput.isNotBlank()) {&#10;                onUpdateDisplayName(nameInput)&#10;            }&#10;            showNameDialog = false&#10;        }&#10;    }&#10;    if (showEmailDialog) {&#10;        EditValueDialog(&#10;            title = &quot;Ubah email&quot;,&#10;            value = emailInput,&#10;            onValueChange = { emailInput = it },&#10;            confirmLabel = &quot;Simpan&quot;&#10;        ) {&#10;            if (emailInput.isNotBlank()) {&#10;                onUpdateEmail(emailInput)&#10;            }&#10;            showEmailDialog = false&#10;        }&#10;    }&#10;    if (showPasswordDialog) {&#10;        EditValueDialog(&#10;            title = &quot;Ubah password&quot;,&#10;            value = passwordInput,&#10;            onValueChange = { passwordInput = it },&#10;            confirmLabel = &quot;Simpan&quot;,&#10;            isPassword = true&#10;        ) {&#10;            if (passwordInput.length &gt;= 6) {&#10;                onUpdatePassword(passwordInput)&#10;            }&#10;            showPasswordDialog = false&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun CardSection(title: String, content: @Composable ColumnScope.() -&gt; Unit) {&#10;    Card(colors = CardDefaults.cardColors(MaterialTheme.colorScheme.surface)) {&#10;        Column(&#10;            modifier = Modifier.padding(16.dp),&#10;            verticalArrangement = Arrangement.spacedBy(8.dp)&#10;        ) {&#10;            Text(title, style = MaterialTheme.typography.titleMedium)&#10;            HorizontalDivider()&#10;            content()&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ProfileAvatar(photoUrl: String?) {&#10;    if (photoUrl.isNullOrBlank()) {&#10;        Image(&#10;            painter = androidx.compose.ui.res.painterResource(id = R.drawable.ic_healynk_logo),&#10;            contentDescription = &quot;Avatar&quot;,&#10;            modifier = Modifier&#10;                .size(56.dp)&#10;                .clip(CircleShape)&#10;        )&#10;    } else {&#10;        AsyncImage(&#10;            model = photoUrl,&#10;            contentDescription = &quot;Avatar&quot;,&#10;            modifier = Modifier&#10;                .size(56.dp)&#10;                .clip(CircleShape)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun SettingsActionRow(&#10;    title: String,&#10;    subtitle: String,&#10;    onClick: () -&gt; Unit&#10;) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Column(modifier = Modifier.weight(1f)) {&#10;            Text(title, fontWeight = FontWeight.Bold)&#10;            Text(subtitle, style = MaterialTheme.typography.bodySmall, color = MaterialTheme.colorScheme.onSurfaceVariant)&#10;        }&#10;        TextButton(onClick = onClick) {&#10;            Text(&quot;Edit&quot;)&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun EditValueDialog(&#10;    title: String,&#10;    value: String,&#10;    onValueChange: (String) -&gt; Unit,&#10;    confirmLabel: String,&#10;    isPassword: Boolean = false,&#10;    onConfirm: () -&gt; Unit&#10;) {&#10;    AlertDialog(&#10;        onDismissRequest = onConfirm,&#10;        title = { Text(title) },&#10;        text = {&#10;            TextField(&#10;                value = value,&#10;                onValueChange = onValueChange,&#10;                modifier = Modifier.fillMaxWidth(),&#10;                singleLine = true,&#10;                visualTransformation = if (isPassword) PasswordVisualTransformation() else androidx.compose.ui.text.input.VisualTransformation.None,&#10;                keyboardOptions = if (isPassword) KeyboardOptions.Default else KeyboardOptions.Default,&#10;                colors = TextFieldDefaults.colors(&#10;                    focusedContainerColor = Color.Transparent,&#10;                    unfocusedContainerColor = Color.Transparent&#10;                )&#10;            )&#10;        },&#10;        confirmButton = {&#10;            TextButton(onClick = onConfirm) { Text(confirmLabel) }&#10;        }&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/utils/Formatters.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/utils/Formatters.kt" />
              <option name="originalContent" value="package com.example.healynk.utils&#10;&#10;import java.text.NumberFormat&#10;import java.text.SimpleDateFormat&#10;import java.util.Date&#10;import java.util.Locale&#10;&#10;object Formatters {&#10;    private val dateFormatter = SimpleDateFormat(&quot;dd MMM yyyy&quot;, Locale.getDefault())&#10;    private val timeFormatter = SimpleDateFormat(&quot;HH:mm&quot;, Locale.getDefault())&#10;    private val dateTimeFormatter = SimpleDateFormat(&quot;dd MMM yyyy, HH:mm&quot;, Locale.getDefault())&#10;    private val percentFormatter = NumberFormat.getPercentInstance(Locale.getDefault()).apply {&#10;        maximumFractionDigits = 0&#10;    }&#10;&#10;    fun formatDate(timestamp: Long): String = dateFormatter.format(Date(timestamp))&#10;    fun formatTime(timestamp: Long): String = timeFormatter.format(Date(timestamp))&#10;    fun formatDateTime(timestamp: Long): String = dateTimeFormatter.format(Date(timestamp))&#10;    fun formatSteps(steps: Int): String = NumberFormat.getIntegerInstance().format(steps)&#10;    fun formatPercentage(value: Float): String = percentFormatter.format(value)&#10;    fun formatDistance(distanceKm: Double): String = String.format(Locale.getDefault(), &quot;%.2f&quot;, distanceKm)&#10;    fun formatPace(pace: Double): String = String.format(Locale.getDefault(), &quot;%.2f&quot;, pace)&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.healynk.utils&#10;&#10;import java.text.NumberFormat&#10;import java.text.SimpleDateFormat&#10;import java.util.Date&#10;import java.util.Locale&#10;&#10;object Formatters {&#10;    private val dateFormatter = SimpleDateFormat(&quot;dd MMM yyyy&quot;, Locale.getDefault())&#10;    private val timeFormatter = SimpleDateFormat(&quot;HH:mm&quot;, Locale.getDefault())&#10;    private val dateTimeFormatter = SimpleDateFormat(&quot;dd MMM yyyy, HH:mm&quot;, Locale.getDefault())&#10;    private val percentFormatter = NumberFormat.getPercentInstance(Locale.getDefault()).apply {&#10;        maximumFractionDigits = 0&#10;    }&#10;&#10;    fun formatDate(timestamp: Long): String = dateFormatter.format(Date(timestamp))&#10;    fun formatTime(timestamp: Long): String = timeFormatter.format(Date(timestamp))&#10;    fun formatDateTime(timestamp: Long): String = dateTimeFormatter.format(Date(timestamp))&#10;    fun formatSteps(steps: Int): String = NumberFormat.getIntegerInstance().format(steps)&#10;    fun formatPercentage(value: Float): String = percentFormatter.format(value)&#10;    fun formatDistance(distanceKm: Double): String = String.format(Locale.getDefault(), &quot;%.2f&quot;, distanceKm)&#10;    fun formatPace(pace: Double): String = String.format(Locale.getDefault(), &quot;%.2f&quot;, pace)&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/healynk/viewmodel/UiViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/healynk/viewmodel/UiViewModel.kt" />
              <option name="originalContent" value="package com.example.healynk.viewmodel&#10;&#10;import android.net.Uri&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.ViewModelProvider&#10;import androidx.lifecycle.viewModelScope&#10;import androidx.lifecycle.viewmodel.initializer&#10;import androidx.lifecycle.viewmodel.viewModelFactory&#10;import com.example.healynk.models.ActivityEntry&#10;import com.example.healynk.models.FoodEntry&#10;import com.example.healynk.models.Measurement&#10;import com.example.healynk.services.AuthService&#10;import com.example.healynk.services.FirebaseService&#10;import com.example.healynk.services.PinResult&#10;import com.example.healynk.services.PinService&#10;import com.example.healynk.services.ProfilePhotoStorageService&#10;import com.example.healynk.services.UserPreferences&#10;import com.example.healynk.utils.Constants&#10;import kotlinx.coroutines.Job&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.asStateFlow&#10;import kotlinx.coroutines.flow.collectLatest&#10;import kotlinx.coroutines.flow.combine&#10;import kotlinx.coroutines.flow.update&#10;import kotlinx.coroutines.launch&#10;import java.time.Instant&#10;import java.time.LocalDate&#10;import java.time.ZoneId&#10;import java.time.format.DateTimeFormatter&#10;import java.util.Locale&#10;import java.util.UUID&#10;&#10;class UiViewModel(&#10;    private val authService: AuthService,&#10;    private val firebaseService: FirebaseService,&#10;    private val pinService: PinService,&#10;    private val profilePhotoStorageService: ProfilePhotoStorageService,&#10;    private val userPreferences: UserPreferences&#10;) : ViewModel() {&#10;&#10;    private val zoneId: ZoneId = ZoneId.systemDefault()&#10;    private val dayFormatter: DateTimeFormatter = DateTimeFormatter.ofPattern(&quot;dd MMM&quot;, Locale.getDefault())&#10;    private var dataJob: Job? = null&#10;&#10;    private val _uiState = MutableStateFlow(UiState())&#10;    val uiState: StateFlow&lt;UiState&gt; = _uiState.asStateFlow()&#10;&#10;    init {&#10;        observeData()&#10;    }&#10;&#10;    fun initSplash() {&#10;        val userId = authService.currentUserId&#10;        val email = authService.currentUserEmail.orEmpty()&#10;        _uiState.value = _uiState.value.copy(&#10;            isAuthenticated = userId != null,&#10;            hasPin = userId?.let { pinService.hasPin(it) } ?: false,&#10;            userEmail = email,&#10;            displayName = authService.currentUserDisplayName.orEmpty(),&#10;            photoUrl = authService.currentUserPhotoUrl&#10;        )&#10;    }&#10;&#10;    fun register(email: String, password: String) = viewModelScope.launch {&#10;        runCatching { authService.register(email, password) }&#10;            .onSuccess {&#10;                authService.logout()&#10;                _uiState.update { state -&gt;&#10;                    state.copy(&#10;                        isAuthenticated = false,&#10;                        hasPin = false,&#10;                        pinVerified = false,&#10;                        registrationSuccess = true,&#10;                        error = null&#10;                    )&#10;                }&#10;            }&#10;            .onFailure {&#10;                _uiState.update { state -&gt; state.copy(error = it.message, registrationSuccess = false) }&#10;            }&#10;    }&#10;&#10;    fun login(email: String, password: String) = viewModelScope.launch {&#10;        runCatching { authService.login(email, password) }&#10;            .onSuccess {&#10;                _uiState.value = _uiState.value.copy(isAuthenticated = true, error = null)&#10;            }&#10;            .onFailure { _uiState.value = _uiState.value.copy(error = it.message) }&#10;    }&#10;&#10;    fun signOut() {&#10;        val userId = authService.currentUserId&#10;        userId?.let(pinService::removePin)&#10;        authService.logout()&#10;        _uiState.value = UiState()&#10;    }&#10;&#10;    fun refreshPinStatus() {&#10;        authService.currentUserId?.let { uid -&gt;&#10;            _uiState.update { it.copy(hasPin = pinService.hasPin(uid)) }&#10;        }&#10;    }&#10;&#10;    fun removePin() {&#10;        authService.currentUserId?.let { uid -&gt;&#10;            pinService.removePin(uid)&#10;            _uiState.update { it.copy(hasPin = false, pinVerified = false) }&#10;        }&#10;    }&#10;&#10;    fun consumeRegistrationSuccess() {&#10;        _uiState.update { it.copy(registrationSuccess = false) }&#10;    }&#10;&#10;    fun setPin(pin: String) {&#10;        val userId = authService.currentUserId ?: return&#10;        pinService.savePin(userId, pin)&#10;        _uiState.value = _uiState.value.copy(hasPin = true, pinVerified = true)&#10;    }&#10;&#10;    fun verifyPin(pin: String) {&#10;        val userId = authService.currentUserId ?: return&#10;        when (val result = pinService.verifyPin(userId, pin)) {&#10;            PinResult.Success -&gt; _uiState.value = _uiState.value.copy(pinVerified = true, error = null)&#10;            is PinResult.Failure -&gt; _uiState.value = _uiState.value.copy(error = &quot;PIN salah, sisa ${result.attemptsRemaining}&quot;)&#10;            is PinResult.Locked -&gt; _uiState.value = _uiState.value.copy(error = &quot;Terkunci hingga ${result.unlockTimeMillis}&quot;)&#10;            PinResult.NoPin -&gt; _uiState.value = _uiState.value.copy(hasPin = false)&#10;        }&#10;    }&#10;&#10;    fun addMeasurement(measurement: Measurement) = viewModelScope.launch {&#10;        authService.currentUserId?.let { uid -&gt;&#10;            val payload = (if (measurement.id.isBlank()) {&#10;                measurement.copy(id = UUID.randomUUID().toString())&#10;            } else measurement).copy(userId = uid)&#10;            firebaseService.addMeasurement(uid, payload)&#10;        }&#10;    }&#10;&#10;    fun addActivity(activity: ActivityEntry) = viewModelScope.launch {&#10;        authService.currentUserId?.let { uid -&gt;&#10;            val payload = (if (activity.id.isBlank()) {&#10;                activity.copy(id = UUID.randomUUID().toString())&#10;            } else activity).copy(userId = uid)&#10;            firebaseService.addActivity(uid, payload)&#10;        }&#10;    }&#10;&#10;    fun addFood(foodEntry: FoodEntry) = viewModelScope.launch {&#10;        authService.currentUserId?.let { uid -&gt;&#10;            val payload = (if (foodEntry.id.isBlank()) {&#10;                foodEntry.copy(id = UUID.randomUUID().toString())&#10;            } else foodEntry).copy(userId = uid)&#10;            firebaseService.addFood(uid, payload)&#10;        }&#10;    }&#10;&#10;    fun deleteMeasurement(id: String) = viewModelScope.launch {&#10;        authService.currentUserId?.let { firebaseService.deleteMeasurement(it, id) }&#10;    }&#10;&#10;    fun deleteActivity(id: String) = viewModelScope.launch {&#10;        authService.currentUserId?.let { firebaseService.deleteActivity(it, id) }&#10;    }&#10;&#10;    fun deleteFood(id: String) = viewModelScope.launch {&#10;        authService.currentUserId?.let { firebaseService.deleteFood(it, id) }&#10;    }&#10;&#10;    private fun observeData() {&#10;        dataJob?.cancel()&#10;        dataJob = viewModelScope.launch {&#10;            authService.authState().collectLatest { isLoggedIn -&gt;&#10;                if (!isLoggedIn) {&#10;                    _uiState.update { state -&gt;&#10;                        state.copy(&#10;                            isAuthenticated = false,&#10;                            hasPin = false,&#10;                            pinVerified = false,&#10;                            measurements = emptyList(),&#10;                            activities = emptyList(),&#10;                            foods = emptyList(),&#10;                            dailyCalories = 0,&#10;                            dailyActivityCalories = 0,&#10;                            latestMeasurement = null,&#10;                            latestBmi = null,&#10;                            weightTrend = emptyList(),&#10;                            bloodPressureTrend = emptyList(),&#10;                            glucoseTrend = emptyList(),&#10;                            weeklyFoodChart = emptyList(),&#10;                            weeklyActivityChart = emptyList(),&#10;                            summaryDistanceKm = 0.0,&#10;                            summaryDuration = 0,&#10;                            userEmail = &quot;&quot;,&#10;                            dailyCaloriesGoal = userPreferences.getBurnGoal(Constants.DAILY_CALORIE_GOAL)&#10;                        )&#10;                    }&#10;                    return@collectLatest&#10;                }&#10;                val userId = authService.currentUserId ?: return@collectLatest&#10;                combine(&#10;                    firebaseService.measurementsFlow(userId),&#10;                    firebaseService.activitiesFlow(userId),&#10;                    firebaseService.foodsFlow(userId)&#10;                ) { measurements, activities, foods -&gt;&#10;                    val todayFoods = foods.filter { it.isToday() }&#10;                    val todayActivities = activities.filter { it.isToday() }&#10;                    val groupedMeasurements = measurements.groupByDay()&#10;                    val groupedFoods = foods.groupFoodDayCalories()&#10;                    val groupedActivities = activities.groupActivityDayCalories()&#10;                    val latestBodyStat = measurements&#10;                        .filter { it.weightKg != null &amp;&amp; it.heightCm != null }&#10;                        .maxByOrNull { it.timestamp }&#10;                    val bmi = calculateBmi(latestBodyStat?.weightKg, latestBodyStat?.heightCm)&#10;                    UiState(&#10;                        isAuthenticated = true,&#10;                        hasPin = pinService.hasPin(userId),&#10;                        pinVerified = _uiState.value.pinVerified,&#10;                        measurements = measurements,&#10;                        activities = activities,&#10;                        foods = foods,&#10;                        dailyCalories = todayFoods.sumOf { it.calories },&#10;                        dailyActivityCalories = todayActivities.sumOf { it.caloriesBurned ?: 0 },&#10;                        dailyCaloriesGoal = userPreferences.getBurnGoal(Constants.DAILY_CALORIE_GOAL),&#10;                        latestMeasurement = measurements.maxByOrNull { it.timestamp },&#10;                        latestBmi = bmi,&#10;                        weightTrend = groupedMeasurements.weightTrend(),&#10;                        bloodPressureTrend = groupedMeasurements.bloodPressureTrend(),&#10;                        glucoseTrend = groupedMeasurements.glucoseTrend(),&#10;                        weeklyFoodChart = groupedFoods,&#10;                        weeklyActivityChart = groupedActivities,&#10;                        summaryDistanceKm = todayActivities.sumOf { it.distanceKm ?: 0.0 },&#10;                        summaryDuration = todayActivities.sumOf { it.durationMinutes ?: 0 },&#10;                        error = null,&#10;                        userEmail = authService.currentUserEmail.orEmpty(),&#10;                        displayName = authService.currentUserDisplayName.orEmpty(),&#10;                        photoUrl = authService.currentUserPhotoUrl&#10;                    )&#10;                }.collectLatest { newState -&gt;&#10;                    _uiState.value = newState&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    private fun Measurement.isToday(): Boolean = timestamp &gt;= startOfDay() &amp;&amp; timestamp &lt;= endOfDay()&#10;    private fun ActivityEntry.isToday(): Boolean = timestamp &gt;= startOfDay() &amp;&amp; timestamp &lt;= endOfDay()&#10;    private fun FoodEntry.isToday(): Boolean = timestamp &gt;= startOfDay() &amp;&amp; timestamp &lt;= endOfDay()&#10;&#10;    private fun startOfDay(): Long {&#10;        val now = System.currentTimeMillis()&#10;        return now - (now % (24 * 60 * 60 * 1000))&#10;    }&#10;&#10;    private fun endOfDay(): Long = startOfDay() + (24 * 60 * 60 * 1000)&#10;&#10;    private fun List&lt;Measurement&gt;.groupByDay(): Map&lt;String, List&lt;Measurement&gt;&gt; =&#10;        groupBy { measurement -&gt;&#10;            Instant.ofEpochMilli(measurement.timestamp).atZone(zoneId).toLocalDate().format(dayFormatter)&#10;        }&#10;&#10;    private fun Map&lt;String, List&lt;Measurement&gt;&gt;.weightTrend(): List&lt;Pair&lt;String, Double&gt;&gt; =&#10;        entries.map { (day, entries) -&gt;&#10;            day to (entries.lastOrNull { it.weightKg != null }?.weightKg ?: 0.0)&#10;        }.takeLast(7)&#10;&#10;    private fun Map&lt;String, List&lt;Measurement&gt;&gt;.bloodPressureTrend(): List&lt;Pair&lt;String, Pair&lt;Int?, Int?&gt;&gt;&gt; =&#10;        entries.map { (day, entries) -&gt;&#10;            day to (entries.lastOrNull()?.let { it.systolic to it.diastolic } ?: (null to null))&#10;        }.takeLast(7)&#10;&#10;    private fun Map&lt;String, List&lt;Measurement&gt;&gt;.glucoseTrend(): List&lt;Pair&lt;String, Int?&gt;&gt; =&#10;        entries.map { (day, entries) -&gt;&#10;            day to entries.lastOrNull { it.glucoseMgDl != null }?.glucoseMgDl&#10;        }.takeLast(7)&#10;&#10;    private fun List&lt;FoodEntry&gt;.groupFoodDayCalories(): List&lt;Pair&lt;String, Int&gt;&gt; =&#10;        groupBy { Instant.ofEpochMilli(it.timestamp).atZone(zoneId).toLocalDate().format(dayFormatter) }&#10;            .map { (day, entries) -&gt; day to entries.sumOf { entry -&gt; entry.calories } }&#10;            .sortedBy { LocalDate.parse(it.first, dayFormatter) }&#10;            .takeLast(7)&#10;&#10;    private fun List&lt;ActivityEntry&gt;.groupActivityDayCalories(): List&lt;Pair&lt;String, Int&gt;&gt; =&#10;        groupBy { Instant.ofEpochMilli(it.timestamp).atZone(zoneId).toLocalDate().format(dayFormatter) }&#10;            .map { (day, entries) -&gt; day to entries.sumOf { entry -&gt; entry.caloriesBurned ?: 0 } }&#10;            .sortedBy { LocalDate.parse(it.first, dayFormatter) }&#10;            .takeLast(7)&#10;&#10;    private fun calculateBmi(weightKg: Double?, heightCm: Double?): Double? {&#10;        if (weightKg == null || heightCm == null || heightCm == 0.0) return null&#10;        val heightM = heightCm / 100.0&#10;        if (heightM &lt;= 0) return null&#10;        return weightKg / (heightM * heightM)&#10;    }&#10;&#10;    companion object {&#10;        fun factory(&#10;            authService: AuthService,&#10;            firebaseService: FirebaseService,&#10;            pinService: PinService,&#10;            profilePhotoStorageService: ProfilePhotoStorageService,&#10;            userPreferences: UserPreferences&#10;        ): ViewModelProvider.Factory = viewModelFactory {&#10;            initializer {&#10;                UiViewModel(authService, firebaseService, pinService, profilePhotoStorageService, userPreferences)&#10;            }&#10;        }&#10;    }&#10;&#10;    fun updateDisplayName(name: String) = viewModelScope.launch {&#10;        runCatching { authService.updateDisplayName(name.trim()) }&#10;            .onSuccess {&#10;                _uiState.update { it.copy(displayName = name.trim(), error = null) }&#10;            }&#10;            .onFailure { throwable -&gt; _uiState.update { state -&gt; state.copy(error = throwable.message ?: &quot;Gagal update nama&quot;) } }&#10;    }&#10;&#10;    fun updatePhotoUrl(photoUrl: String?) = viewModelScope.launch {&#10;        runCatching { authService.updatePhotoUrl(photoUrl) }&#10;            .onSuccess { _uiState.update { it.copy(photoUrl = photoUrl, error = null) } }&#10;            .onFailure { throwable -&gt; _uiState.update { state -&gt; state.copy(error = throwable.message ?: &quot;Gagal update foto&quot;) } }&#10;    }&#10;&#10;    fun updateEmail(newEmail: String) = viewModelScope.launch {&#10;        runCatching { authService.updateEmail(newEmail.trim()) }&#10;            .onSuccess { _uiState.update { it.copy(userEmail = newEmail.trim(), error = null) } }&#10;            .onFailure { throwable -&gt; _uiState.update { state -&gt; state.copy(error = throwable.message ?: &quot;Gagal update email&quot;) } }&#10;    }&#10;&#10;    fun updatePassword(newPassword: String) = viewModelScope.launch {&#10;        runCatching { authService.updatePassword(newPassword) }&#10;            .onSuccess { _uiState.update { it.copy(error = null) } }&#10;            .onFailure { throwable -&gt; _uiState.update { state -&gt; state.copy(error = throwable.message ?: &quot;Gagal update password&quot;) } }&#10;    }&#10;&#10;    fun addBodyStats(measurement: Measurement) = addMeasurement(measurement)&#10;&#10;    fun uploadProfilePhoto(photoUri: Uri) = viewModelScope.launch {&#10;        val userId = authService.currentUserId ?: return@launch&#10;        runCatching {&#10;            val downloadUrl = profilePhotoStorageService.uploadProfilePhoto(userId, photoUri)&#10;            authService.updatePhotoUrl(downloadUrl)&#10;            downloadUrl&#10;        }.onSuccess { url -&gt;&#10;            _uiState.update { it.copy(photoUrl = url, error = null) }&#10;        }.onFailure { throwable -&gt;&#10;            _uiState.update { it.copy(error = throwable.message ?: &quot;Gagal upload foto&quot;) }&#10;        }&#10;    }&#10;&#10;    fun updateBurnGoal(goal: Int) {&#10;        userPreferences.setBurnGoal(goal)&#10;        _uiState.update { it.copy(dailyCaloriesGoal = goal) }&#10;    }&#10;}&#10;&#10;data class UiState(&#10;    val isAuthenticated: Boolean = false,&#10;    val hasPin: Boolean = false,&#10;    val pinVerified: Boolean = false,&#10;    val measurements: List&lt;Measurement&gt; = emptyList(),&#10;    val activities: List&lt;ActivityEntry&gt; = emptyList(),&#10;    val foods: List&lt;FoodEntry&gt; = emptyList(),&#10;    val dailyCalories: Int = 0,&#10;    val dailyActivityCalories: Int = 0,&#10;    val dailyCaloriesGoal: Int = Constants.DAILY_CALORIE_GOAL,&#10;    val latestMeasurement: Measurement? = null,&#10;    val latestBmi: Double? = null,&#10;    val weightTrend: List&lt;Pair&lt;String, Double&gt;&gt; = emptyList(),&#10;    val bloodPressureTrend: List&lt;Pair&lt;String, Pair&lt;Int?, Int?&gt;&gt;&gt; = emptyList(),&#10;    val glucoseTrend: List&lt;Pair&lt;String, Int?&gt;&gt; = emptyList(),&#10;    val weeklyFoodChart: List&lt;Pair&lt;String, Int&gt;&gt; = emptyList(),&#10;    val weeklyActivityChart: List&lt;Pair&lt;String, Int&gt;&gt; = emptyList(),&#10;    val summaryDistanceKm: Double = 0.0,&#10;    val summaryDuration: Int = 0,&#10;    val error: String? = null,&#10;    val userEmail: String = &quot;&quot;,&#10;    val displayName: String = &quot;&quot;,&#10;    val photoUrl: String? = null,&#10;    val registrationSuccess: Boolean = false&#10;)&#10;" />
              <option name="updatedContent" value="package com.example.healynk.viewmodel&#10;&#10;import android.net.Uri&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.ViewModelProvider&#10;import androidx.lifecycle.viewModelScope&#10;import androidx.lifecycle.viewmodel.initializer&#10;import androidx.lifecycle.viewmodel.viewModelFactory&#10;import com.example.healynk.models.ActivityEntry&#10;import com.example.healynk.models.FoodEntry&#10;import com.example.healynk.models.Measurement&#10;import com.example.healynk.services.AuthService&#10;import com.example.healynk.services.FirebaseService&#10;import com.example.healynk.services.PinResult&#10;import com.example.healynk.services.PinService&#10;import com.example.healynk.services.ProfilePhotoStorageService&#10;import com.example.healynk.services.UserPreferences&#10;import com.example.healynk.utils.Constants&#10;import kotlinx.coroutines.Job&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.asStateFlow&#10;import kotlinx.coroutines.flow.collectLatest&#10;import kotlinx.coroutines.flow.combine&#10;import kotlinx.coroutines.flow.update&#10;import kotlinx.coroutines.launch&#10;import java.time.Instant&#10;import java.time.LocalDate&#10;import java.time.ZoneId&#10;import java.time.format.DateTimeFormatter&#10;import java.util.Locale&#10;import java.util.UUID&#10;&#10;class UiViewModel(&#10;    private val authService: AuthService,&#10;    private val firebaseService: FirebaseService,&#10;    private val pinService: PinService,&#10;    private val profilePhotoStorageService: ProfilePhotoStorageService,&#10;    private val userPreferences: UserPreferences&#10;) : ViewModel() {&#10;&#10;    private val zoneId: ZoneId = ZoneId.systemDefault()&#10;    private val dayFormatter: DateTimeFormatter = DateTimeFormatter.ofPattern(&quot;dd MMM&quot;, Locale.getDefault())&#10;    private var dataJob: Job? = null&#10;&#10;    private val _uiState = MutableStateFlow(UiState())&#10;    val uiState: StateFlow&lt;UiState&gt; = _uiState.asStateFlow()&#10;&#10;    init {&#10;        observeData()&#10;    }&#10;&#10;    fun initSplash() {&#10;        val userId = authService.currentUserId&#10;        val email = authService.currentUserEmail.orEmpty()&#10;        _uiState.value = _uiState.value.copy(&#10;            isAuthenticated = userId != null,&#10;            hasPin = userId?.let { pinService.hasPin(it) } ?: false,&#10;            userEmail = email,&#10;            displayName = authService.currentUserDisplayName.orEmpty(),&#10;            photoUrl = authService.currentUserPhotoUrl&#10;        )&#10;    }&#10;&#10;    fun register(email: String, password: String) = viewModelScope.launch {&#10;        runCatching { authService.register(email, password) }&#10;            .onSuccess {&#10;                authService.logout()&#10;                _uiState.update { state -&gt;&#10;                    state.copy(&#10;                        isAuthenticated = false,&#10;                        hasPin = false,&#10;                        pinVerified = false,&#10;                        registrationSuccess = true,&#10;                        error = null&#10;                    )&#10;                }&#10;            }&#10;            .onFailure {&#10;                _uiState.update { state -&gt; state.copy(error = it.message, registrationSuccess = false) }&#10;            }&#10;    }&#10;&#10;    fun login(email: String, password: String) = viewModelScope.launch {&#10;        runCatching { authService.login(email, password) }&#10;            .onSuccess {&#10;                _uiState.value = _uiState.value.copy(isAuthenticated = true, error = null)&#10;            }&#10;            .onFailure { _uiState.value = _uiState.value.copy(error = it.message) }&#10;    }&#10;&#10;    fun signOut() {&#10;        val userId = authService.currentUserId&#10;        userId?.let(pinService::removePin)&#10;        authService.logout()&#10;        _uiState.value = UiState()&#10;    }&#10;&#10;    fun refreshPinStatus() {&#10;        authService.currentUserId?.let { uid -&gt;&#10;            _uiState.update { it.copy(hasPin = pinService.hasPin(uid)) }&#10;        }&#10;    }&#10;&#10;    fun removePin() {&#10;        authService.currentUserId?.let { uid -&gt;&#10;            pinService.removePin(uid)&#10;            _uiState.update { it.copy(hasPin = false, pinVerified = false) }&#10;        }&#10;    }&#10;&#10;    fun consumeRegistrationSuccess() {&#10;        _uiState.update { it.copy(registrationSuccess = false) }&#10;    }&#10;&#10;    fun setPin(pin: String) {&#10;        val userId = authService.currentUserId ?: return&#10;        pinService.savePin(userId, pin)&#10;        _uiState.value = _uiState.value.copy(hasPin = true, pinVerified = true)&#10;    }&#10;&#10;    fun verifyPin(pin: String) {&#10;        val userId = authService.currentUserId ?: return&#10;        when (val result = pinService.verifyPin(userId, pin)) {&#10;            PinResult.Success -&gt; _uiState.value = _uiState.value.copy(pinVerified = true, error = null)&#10;            is PinResult.Failure -&gt; _uiState.value = _uiState.value.copy(error = &quot;PIN salah, sisa ${result.attemptsRemaining}&quot;)&#10;            is PinResult.Locked -&gt; _uiState.value = _uiState.value.copy(error = &quot;Terkunci hingga ${result.unlockTimeMillis}&quot;)&#10;            PinResult.NoPin -&gt; _uiState.value = _uiState.value.copy(hasPin = false)&#10;        }&#10;    }&#10;&#10;    fun addMeasurement(measurement: Measurement) = viewModelScope.launch {&#10;        authService.currentUserId?.let { uid -&gt;&#10;            val payload = (if (measurement.id.isBlank()) {&#10;                measurement.copy(id = UUID.randomUUID().toString())&#10;            } else measurement).copy(userId = uid)&#10;            firebaseService.addMeasurement(uid, payload)&#10;        }&#10;    }&#10;&#10;    fun addActivity(activity: ActivityEntry) = viewModelScope.launch {&#10;        authService.currentUserId?.let { uid -&gt;&#10;            val payload = (if (activity.id.isBlank()) {&#10;                activity.copy(id = UUID.randomUUID().toString())&#10;            } else activity).copy(userId = uid)&#10;            firebaseService.addActivity(uid, payload)&#10;        }&#10;    }&#10;&#10;    fun addFood(foodEntry: FoodEntry) = viewModelScope.launch {&#10;        authService.currentUserId?.let { uid -&gt;&#10;            val payload = (if (foodEntry.id.isBlank()) {&#10;                foodEntry.copy(id = UUID.randomUUID().toString())&#10;            } else foodEntry).copy(userId = uid)&#10;            firebaseService.addFood(uid, payload)&#10;        }&#10;    }&#10;&#10;    fun deleteMeasurement(id: String) = viewModelScope.launch {&#10;        authService.currentUserId?.let { firebaseService.deleteMeasurement(it, id) }&#10;    }&#10;&#10;    fun deleteActivity(id: String) = viewModelScope.launch {&#10;        authService.currentUserId?.let { firebaseService.deleteActivity(it, id) }&#10;    }&#10;&#10;    fun deleteFood(id: String) = viewModelScope.launch {&#10;        authService.currentUserId?.let { firebaseService.deleteFood(it, id) }&#10;    }&#10;&#10;    private fun observeData() {&#10;        dataJob?.cancel()&#10;        dataJob = viewModelScope.launch {&#10;            authService.authState().collectLatest { isLoggedIn -&gt;&#10;                if (!isLoggedIn) {&#10;                    _uiState.update { state -&gt;&#10;                        state.copy(&#10;                            isAuthenticated = false,&#10;                            hasPin = false,&#10;                            pinVerified = false,&#10;                            measurements = emptyList(),&#10;                            activities = emptyList(),&#10;                            foods = emptyList(),&#10;                            dailyCalories = 0,&#10;                            dailyActivityCalories = 0,&#10;                            latestMeasurement = null,&#10;                            latestBmi = null,&#10;                            weightTrend = emptyList(),&#10;                            bloodPressureTrend = emptyList(),&#10;                            glucoseTrend = emptyList(),&#10;                            weeklyFoodChart = emptyList(),&#10;                            weeklyActivityChart = emptyList(),&#10;                            summaryDistanceKm = 0.0,&#10;                            summaryDuration = 0,&#10;                            userEmail = &quot;&quot;,&#10;                            dailyCaloriesGoal = userPreferences.getBurnGoal(Constants.DAILY_CALORIE_GOAL)&#10;                        )&#10;                    }&#10;                    return@collectLatest&#10;                }&#10;                val userId = authService.currentUserId ?: return@collectLatest&#10;                combine(&#10;                    firebaseService.measurementsFlow(userId),&#10;                    firebaseService.activitiesFlow(userId),&#10;                    firebaseService.foodsFlow(userId)&#10;                ) { measurements, activities, foods -&gt;&#10;                    val todayFoods = foods.filter { it.isToday() }&#10;                    val todayActivities = activities.filter { it.isToday() }&#10;                    val groupedMeasurements = measurements.groupByDay()&#10;                    val groupedFoods = foods.groupFoodDayCalories()&#10;                    val groupedActivities = activities.groupActivityDayCalories()&#10;                    val latestBodyStat = measurements&#10;                        .filter { it.weightKg != null &amp;&amp; it.heightCm != null }&#10;                        .maxByOrNull { it.timestamp }&#10;                    val bmi = calculateBmi(latestBodyStat?.weightKg, latestBodyStat?.heightCm)&#10;                    UiState(&#10;                        isAuthenticated = true,&#10;                        hasPin = pinService.hasPin(userId),&#10;                        pinVerified = _uiState.value.pinVerified,&#10;                        measurements = measurements,&#10;                        activities = activities,&#10;                        foods = foods,&#10;                        dailyCalories = todayFoods.sumOf { it.calories },&#10;                        dailyActivityCalories = todayActivities.sumOf { it.caloriesBurned ?: 0 },&#10;                        dailyCaloriesGoal = userPreferences.getBurnGoal(Constants.DAILY_CALORIE_GOAL),&#10;                        latestMeasurement = measurements.maxByOrNull { it.timestamp },&#10;                        latestBmi = bmi,&#10;                        weightTrend = groupedMeasurements.weightTrend(),&#10;                        bloodPressureTrend = groupedMeasurements.bloodPressureTrend(),&#10;                        glucoseTrend = groupedMeasurements.glucoseTrend(),&#10;                        weeklyFoodChart = groupedFoods,&#10;                        weeklyActivityChart = groupedActivities,&#10;                        summaryDistanceKm = todayActivities.sumOf { it.distanceKm ?: 0.0 },&#10;                        summaryDuration = todayActivities.sumOf { it.durationMinutes ?: 0 },&#10;                        error = null,&#10;                        userEmail = authService.currentUserEmail.orEmpty(),&#10;                        displayName = authService.currentUserDisplayName.orEmpty(),&#10;                        photoUrl = authService.currentUserPhotoUrl&#10;                    )&#10;                }.collectLatest { newState -&gt;&#10;                    _uiState.value = newState&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    private fun Measurement.isToday(): Boolean = timestamp &gt;= startOfDay() &amp;&amp; timestamp &lt;= endOfDay()&#10;    private fun ActivityEntry.isToday(): Boolean = timestamp &gt;= startOfDay() &amp;&amp; timestamp &lt;= endOfDay()&#10;    private fun FoodEntry.isToday(): Boolean = timestamp &gt;= startOfDay() &amp;&amp; timestamp &lt;= endOfDay()&#10;&#10;    private fun startOfDay(): Long {&#10;        val now = System.currentTimeMillis()&#10;        return now - (now % (24 * 60 * 60 * 1000))&#10;    }&#10;&#10;    private fun endOfDay(): Long = startOfDay() + (24 * 60 * 60 * 1000)&#10;&#10;    private fun List&lt;Measurement&gt;.groupByDay(): Map&lt;String, List&lt;Measurement&gt;&gt; =&#10;        groupBy { measurement -&gt;&#10;            Instant.ofEpochMilli(measurement.timestamp).atZone(zoneId).toLocalDate().format(dayFormatter)&#10;        }&#10;&#10;    private fun Map&lt;String, List&lt;Measurement&gt;&gt;.weightTrend(): List&lt;Pair&lt;String, Double&gt;&gt; =&#10;        entries.map { (day, entries) -&gt;&#10;            day to (entries.lastOrNull { it.weightKg != null }?.weightKg ?: 0.0)&#10;        }.takeLast(7)&#10;&#10;    private fun Map&lt;String, List&lt;Measurement&gt;&gt;.bloodPressureTrend(): List&lt;Pair&lt;String, Pair&lt;Int?, Int?&gt;&gt;&gt; =&#10;        entries.map { (day, entries) -&gt;&#10;            day to (entries.lastOrNull()?.let { it.systolic to it.diastolic } ?: (null to null))&#10;        }.takeLast(7)&#10;&#10;    private fun Map&lt;String, List&lt;Measurement&gt;&gt;.glucoseTrend(): List&lt;Pair&lt;String, Int?&gt;&gt; =&#10;        entries.map { (day, entries) -&gt;&#10;            day to entries.lastOrNull { it.glucoseMgDl != null }?.glucoseMgDl&#10;        }.takeLast(7)&#10;&#10;    private fun List&lt;FoodEntry&gt;.groupFoodDayCalories(): List&lt;Pair&lt;String, Int&gt;&gt; =&#10;        groupBy { Instant.ofEpochMilli(it.timestamp).atZone(zoneId).toLocalDate().format(dayFormatter) }&#10;            .map { (day, entries) -&gt; day to entries.sumOf { entry -&gt; entry.calories } }&#10;            .sortedBy { LocalDate.parse(it.first, dayFormatter) }&#10;            .takeLast(7)&#10;&#10;    private fun List&lt;ActivityEntry&gt;.groupActivityDayCalories(): List&lt;Pair&lt;String, Int&gt;&gt; =&#10;        groupBy { Instant.ofEpochMilli(it.timestamp).atZone(zoneId).toLocalDate().format(dayFormatter) }&#10;            .map { (day, entries) -&gt; day to entries.sumOf { entry -&gt; entry.caloriesBurned ?: 0 } }&#10;            .sortedBy { LocalDate.parse(it.first, dayFormatter) }&#10;            .takeLast(7)&#10;&#10;    private fun calculateBmi(weightKg: Double?, heightCm: Double?): Double? {&#10;        if (weightKg == null || heightCm == null || heightCm == 0.0) return null&#10;        val heightM = heightCm / 100.0&#10;        if (heightM &lt;= 0) return null&#10;        return weightKg / (heightM * heightM)&#10;    }&#10;&#10;    companion object {&#10;        fun factory(&#10;            authService: AuthService,&#10;            firebaseService: FirebaseService,&#10;            pinService: PinService,&#10;            profilePhotoStorageService: ProfilePhotoStorageService,&#10;            userPreferences: UserPreferences&#10;        ): ViewModelProvider.Factory = viewModelFactory {&#10;            initializer {&#10;                UiViewModel(authService, firebaseService, pinService, profilePhotoStorageService, userPreferences)&#10;            }&#10;        }&#10;    }&#10;&#10;    fun updateDisplayName(name: String) = viewModelScope.launch {&#10;        runCatching { authService.updateDisplayName(name.trim()) }&#10;            .onSuccess {&#10;                _uiState.update { it.copy(displayName = name.trim(), error = null) }&#10;            }&#10;            .onFailure { throwable -&gt; _uiState.update { state -&gt; state.copy(error = throwable.message ?: &quot;Gagal update nama&quot;) } }&#10;    }&#10;&#10;    fun updatePhotoUrl(photoUrl: String?) = viewModelScope.launch {&#10;        runCatching { authService.updatePhotoUrl(photoUrl) }&#10;            .onSuccess { _uiState.update { it.copy(photoUrl = photoUrl, error = null) } }&#10;            .onFailure { throwable -&gt; _uiState.update { state -&gt; state.copy(error = throwable.message ?: &quot;Gagal update foto&quot;) } }&#10;    }&#10;&#10;    fun updateEmail(newEmail: String) = viewModelScope.launch {&#10;        runCatching { authService.updateEmail(newEmail.trim()) }&#10;            .onSuccess { _uiState.update { it.copy(userEmail = newEmail.trim(), error = null) } }&#10;            .onFailure { throwable -&gt; _uiState.update { state -&gt; state.copy(error = throwable.message ?: &quot;Gagal update email&quot;) } }&#10;    }&#10;&#10;    fun updatePassword(newPassword: String) = viewModelScope.launch {&#10;        runCatching { authService.updatePassword(newPassword) }&#10;            .onSuccess { _uiState.update { it.copy(error = null) } }&#10;            .onFailure { throwable -&gt; _uiState.update { state -&gt; state.copy(error = throwable.message ?: &quot;Gagal update password&quot;) } }&#10;    }&#10;&#10;    fun addBodyStats(measurement: Measurement) = addMeasurement(measurement)&#10;&#10;    fun uploadProfilePhoto(photoUri: Uri) = viewModelScope.launch {&#10;        val userId = authService.currentUserId ?: return@launch&#10;        runCatching {&#10;            val downloadUrl = profilePhotoStorageService.uploadProfilePhoto(userId, photoUri)&#10;            authService.updatePhotoUrl(downloadUrl)&#10;            downloadUrl&#10;        }.onSuccess { url -&gt;&#10;            _uiState.update { it.copy(photoUrl = url, error = null) }&#10;        }.onFailure { throwable -&gt;&#10;            _uiState.update { it.copy(error = throwable.message ?: &quot;Gagal upload foto&quot;) }&#10;        }&#10;    }&#10;&#10;    fun updateBurnGoal(goal: Int) {&#10;        userPreferences.setBurnGoal(goal)&#10;        _uiState.update { it.copy(dailyCaloriesGoal = goal) }&#10;    }&#10;}&#10;&#10;data class UiState(&#10;    val isAuthenticated: Boolean = false,&#10;    val hasPin: Boolean = false,&#10;    val pinVerified: Boolean = false,&#10;    val measurements: List&lt;Measurement&gt; = emptyList(),&#10;    val activities: List&lt;ActivityEntry&gt; = emptyList(),&#10;    val foods: List&lt;FoodEntry&gt; = emptyList(),&#10;    val dailyCalories: Int = 0,&#10;    val dailyActivityCalories: Int = 0,&#10;    val dailyCaloriesGoal: Int = Constants.DAILY_CALORIE_GOAL,&#10;    val latestMeasurement: Measurement? = null,&#10;    val latestBmi: Double? = null,&#10;    val weightTrend: List&lt;Pair&lt;String, Double&gt;&gt; = emptyList(),&#10;    val bloodPressureTrend: List&lt;Pair&lt;String, Pair&lt;Int?, Int?&gt;&gt;&gt; = emptyList(),&#10;    val glucoseTrend: List&lt;Pair&lt;String, Int?&gt;&gt; = emptyList(),&#10;    val weeklyFoodChart: List&lt;Pair&lt;String, Int&gt;&gt; = emptyList(),&#10;    val weeklyActivityChart: List&lt;Pair&lt;String, Int&gt;&gt; = emptyList(),&#10;    val summaryDistanceKm: Double = 0.0,&#10;    val summaryDuration: Int = 0,&#10;    val error: String? = null,&#10;    val userEmail: String = &quot;&quot;,&#10;    val displayName: String = &quot;&quot;,&#10;    val photoUrl: String? = null,&#10;    val registrationSuccess: Boolean = false&#10;)" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>